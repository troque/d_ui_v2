{"ast":null,"code":"import _regeneratorRuntime from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{getBearerToken}from'../../../components/Utils/Common';var baseUrl=process.env.REACT_APP_API_URL;var headers={'Content-Type':'application/vnd.api+json','Accept':'application/vnd.api+json'};function login(_x,_x2){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user,password){var url,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=baseUrl+\"Auth/Login\";data={\"data\":{\"type\":\"login\",\"attributes\":{\"user\":user,\"password\":password}}};_context.next=4;return axios.post(url,data,{headers:headers}).then(function(response){return response.data;}).catch(function(error){//console.log(error);\nreturn{estado:false,error:error};});case 4:return _context.abrupt(\"return\",_context.sent);case 5:case\"end\":return _context.stop();}}},_callee);}));return _login.apply(this,arguments);}function hasAccess(_x3,_x4){return _hasAccess.apply(this,arguments);}function _hasAccess(){_hasAccess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(modulo,funcionalidad){var url,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=baseUrl+\"Auth/hasAccess\";data={\"data\":{\"type\":\"Auth\",\"attributes\":{\"modulo\":modulo,\"funcionalidad\":funcionalidad}}};headers['Authorization']=getBearerToken();_context2.next=5;return axios.post(url,data,{headers:headers}).then(function(response){//console.log(response);\nreturn true;}).catch(function(error){//console.log(error);\nreturn false;});case 5:return _context2.abrupt(\"return\",_context2.sent);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _hasAccess.apply(this,arguments);}function findUsers(_x5){return _findUsers.apply(this,arguments);}function _findUsers(){_findUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(criteria){var url;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:url=baseUrl+\"Auth/users/\"+criteria;headers['Authorization']=getBearerToken();_context3.next=4;return axios.get(url,{headers:headers}).then(function(response){return response;}).catch(function(error){//console.log(error);\nreturn{estado:false,error:error};});case 4:return _context3.abrupt(\"return\",_context3.sent);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _findUsers.apply(this,arguments);}export default{login:login,hasAccess:hasAccess,findUsers:findUsers};","map":{"version":3,"names":["axios","getBearerToken","baseUrl","process","env","REACT_APP_API_URL","headers","login","user","password","url","data","post","then","response","catch","error","estado","hasAccess","modulo","funcionalidad","findUsers","criteria","get"],"sources":["C:/w2d/personeria/personeria-ui/src/components/Api/Services/AuthApi.js"],"sourcesContent":["import axios from 'axios'\r\nimport { getBearerToken } from '../../../components/Utils/Common';\r\n\r\nconst baseUrl = process.env.REACT_APP_API_URL;\r\n\r\n\r\nlet headers = {\r\n    'Content-Type': 'application/vnd.api+json',\r\n    'Accept': 'application/vnd.api+json'\r\n}\r\n\r\nasync function login(user, password) {\r\n\r\n    const url = baseUrl + \"Auth/Login\";\r\n    const data = {\r\n        \"data\": {\r\n            \"type\": \"login\",\r\n            \"attributes\": {\r\n                \"user\": user,\r\n                \"password\": password\r\n            }\r\n        }\r\n    };\r\n\r\n    return await axios.post(url, data, {\r\n        headers: headers\r\n    })\r\n        .then(response => {\r\n            return response.data;\r\n        })\r\n        .catch(error => {\r\n            //console.log(error);\r\n            return { estado: false, error: error }\r\n        });\r\n}\r\n\r\n\r\nasync function hasAccess(modulo, funcionalidad) {\r\n    const url = baseUrl + \"Auth/hasAccess\";\r\n    const data = {\r\n        \"data\": {\r\n            \"type\": \"Auth\",\r\n            \"attributes\": {\r\n                \"modulo\": modulo,\r\n                \"funcionalidad\": funcionalidad\r\n            }\r\n        }\r\n    };\r\n    headers['Authorization'] = getBearerToken();\r\n\r\n    return await axios.post(url, data, {\r\n        headers: headers\r\n    })\r\n        .then(response => {\r\n            //console.log(response);\r\n            return true;\r\n        })\r\n        .catch(error => {\r\n            //console.log(error);\r\n            return false;\r\n        });\r\n}\r\n\r\nasync function findUsers(criteria) {\r\n    const url = baseUrl + \"Auth/users/\" + criteria;\r\n    headers['Authorization'] = getBearerToken();\r\n\r\n    return await axios.get(url, {\r\n        headers: headers\r\n    })\r\n    .then(response => {\r\n        return response;\r\n    })\r\n    .catch(error => {\r\n        //console.log(error);\r\n        return { estado: false, error: error }\r\n    });\r\n}\r\n\r\nexport default { login, hasAccess, findUsers}\r\n"],"mappings":"0PAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,cAAc,KAAQ,kCAAkC,CAEjE,GAAMC,QAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAG7C,GAAIC,QAAO,CAAG,CACV,cAAc,CAAE,0BAA0B,CAC1C,QAAQ,CAAE,0BACd,CAAC,SAEcC,MAAK,iIAApB,iBAAqBC,IAAI,CAAEC,QAAQ,iIAEzBC,GAAG,CAAGR,OAAO,CAAG,YAAY,CAC5BS,IAAI,CAAG,CACT,MAAM,CAAE,CACJ,MAAM,CAAE,OAAO,CACf,YAAY,CAAE,CACV,MAAM,CAAEH,IAAI,CACZ,UAAU,CAAEC,QAChB,CACJ,CACJ,CAAC,uBAEYT,MAAK,CAACY,IAAI,CAACF,GAAG,CAAEC,IAAI,CAAE,CAC/BL,OAAO,CAAEA,OACb,CAAC,CAAC,CACGO,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACd,MAAOA,SAAQ,CAACH,IAAI,CACxB,CAAC,CAAC,CACDI,KAAK,CAAC,SAAAC,KAAK,CAAI,CACZ;AACA,MAAO,CAAEC,MAAM,CAAE,KAAK,CAAED,KAAK,CAAEA,KAAM,CAAC,CAC1C,CAAC,CAAC,6GACT,gDAGcE,UAAS,8IAAxB,kBAAyBC,MAAM,CAAEC,aAAa,qIACpCV,GAAG,CAAGR,OAAO,CAAG,gBAAgB,CAChCS,IAAI,CAAG,CACT,MAAM,CAAE,CACJ,MAAM,CAAE,MAAM,CACd,YAAY,CAAE,CACV,QAAQ,CAAEQ,MAAM,CAChB,eAAe,CAAEC,aACrB,CACJ,CACJ,CAAC,CACDd,OAAO,CAAC,eAAe,CAAC,CAAGL,cAAc,EAAE,CAAC,uBAE/BD,MAAK,CAACY,IAAI,CAACF,GAAG,CAAEC,IAAI,CAAE,CAC/BL,OAAO,CAAEA,OACb,CAAC,CAAC,CACGO,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACd;AACA,MAAO,KAAI,CACf,CAAC,CAAC,CACDC,KAAK,CAAC,SAAAC,KAAK,CAAI,CACZ;AACA,MAAO,MAAK,CAChB,CAAC,CAAC,iHACT,oDAEcK,UAAS,0IAAxB,kBAAyBC,QAAQ,gIACvBZ,GAAG,CAAGR,OAAO,CAAG,aAAa,CAAGoB,QAAQ,CAC9ChB,OAAO,CAAC,eAAe,CAAC,CAAGL,cAAc,EAAE,CAAC,uBAE/BD,MAAK,CAACuB,GAAG,CAACb,GAAG,CAAE,CACxBJ,OAAO,CAAEA,OACb,CAAC,CAAC,CACDO,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACd,MAAOA,SAAQ,CACnB,CAAC,CAAC,CACDC,KAAK,CAAC,SAAAC,KAAK,CAAI,CACZ;AACA,MAAO,CAAEC,MAAM,CAAE,KAAK,CAAED,KAAK,CAAEA,KAAM,CAAC,CAC1C,CAAC,CAAC,iHACL,4CAED,cAAe,CAAET,KAAK,CAALA,KAAK,CAAEW,SAAS,CAATA,SAAS,CAAEG,SAAS,CAATA,SAAS,CAAC"},"metadata":{},"sourceType":"module"}