{"ast":null,"code":"import _asyncToGenerator from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\w2d\\\\personeria\\\\personeria-ui\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import{ErrorMessage,Field,Form,Formik}from'formik';import InfoErrorApi from'../../Utils/InfoErrorApi';import InfoExitoApi from'../../Utils/InfoExitoApi';import{Link}from\"react-router-dom\";import Spinner from'../../Utils/Spinner';import CierreEtapaApi from'../../Api/Services/CierreEtapaApi';import{useLocation}from'react-router-dom';import ListaBotones from'../../Utils/ListaBotones';import{hasAccess}from'../../../components/Utils/Common';import GenericApi from'./../../Api/Services/GenericApi';import DataTable from'react-data-table-component';import'../../Utils/Constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AntecedentesLista(){var location=useLocation();var from=location.state.from;var radicado=from.radicado;var procesoDisciplinarioId=from.procesoDisciplinarioId;var id_etapa=from.idEtapa;var paganationPerPages=process.env.PAGINATION_PER_PAGE;var _useState=useState(process.env.PAGINATION_PER_PAGE),_useState2=_slicedToArray(_useState,2),perPage=_useState2[0],setPerPage=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),pageActual=_useState4[0],setPageActual=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorApi=_useState6[0],setErrorApi=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),getSeach=_useState8[0],setSeach=_useState8[1];var _useState9=useState({id_etapa:id_etapa,id_fase:global.Constants.FASES.ANTECEDENTES,crear_registro:\"/AntencentesForm\",consultar_registros:\"/AntencentesLista\",adjuntar_documento:\"/SoporteRadicadoForm\",repositorio_documentos:\"/SoporteRadicadoLista\",modulo:\"CR_Antecedente\",funcionalidad_crear:\"Crear\",funcionalidad_consultar:\"Consultar\",muestra_atras:true}),_useState10=_slicedToArray(_useState9,2),getRoutes=_useState10[0],setRoutes=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),estadoEtapaCapturaReparto=_useState12[0],setEstadoEtapaCapturaReparto=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),getEstadoLista=_useState14[0],setEstadoLista=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),getAntecedenteSeleccionado=_useState16[0],setAntecedenteSeleccionado=_useState16[1];var columns=[{name:'Registrado por',cell:function cell(antecedente){return/*#__PURE__*/_jsxs(\"div\",{children:[antecedente.attributes.nombre_completo,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Etapa: \"}),antecedente.attributes.etapa.nombre]});},selector:function selector(antecedente){return antecedente.attributes.nombre_completo;},sortable:true,width:\"20%\"},{name:'Fecha registro',cell:function cell(antecedente){return antecedente.attributes.fecha_creado;},selector:function selector(antecedente){return antecedente.attributes.fecha_creado;},sortable:true,width:\"10%\"},{name:'Dependencia',cell:function cell(antecedente){return antecedente.attributes.nombre_dependencia;},selector:function selector(antecedente){return antecedente.attributes.nombre_dependencia;},sortable:true,width:\"15%\"},{name:'DescripciÃ³n',cell:function cell(antecedente){return/*#__PURE__*/_jsx(\"div\",{title:antecedente.attributes.descripcion,children:antecedente.attributes.descripcion.length>global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION?antecedente.attributes.descripcion.substring(0,global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION)+\"...\":antecedente.attributes.descripcion});},selector:function selector(antecedente){return antecedente.attributes.descripcion;},sortable:true,width:\"25%\"},{name:'Estado',selector:function selector(antecedente){return antecedente.attributes.estado==\"1\"?'Activo':'Inactivo';},sortable:true,width:\"15%\"},{name:'Acciones',width:\"15%\",cell:function cell(antecedente){return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",title:\"Consultar Antecedente\",className:\"btn btn-sm btn-primary inline\",\"data-toggle\":\"modal\",onClick:function onClick(){return cargarDetalleCambiosEstado(antecedente);},\"data-target\":'#modal-consultar-detalle',children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-search\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:hasAccess('CR_Antecedente','Inactivar')?/*#__PURE__*/_jsxs(\"div\",{children:[antecedente.attributes.estado==0?/*#__PURE__*/_jsx(Link,{to:\"/AntecedentesCambiarEstadoForm/\".concat(antecedente.id),state:{from:from},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",title:\"Activar Antecedente\",className:\"btn btn-sm btn-success\",\"data-toggle\":\"modal\",\"data-target\":'#modal-cambiar-estado',children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})}):null,antecedente.attributes.estado==1&&(getAntecedentesLista.data.length>1||pageActual>1)?/*#__PURE__*/_jsx(Link,{to:\"/AntecedentesCambiarEstadoForm/\".concat(antecedente.id),state:{from:from},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",title:\"Inactivar Antecedente\",className:\"btn btn-sm btn-danger\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})})}):null,/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:'modal-consultar-detalle',tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"modal-block-normal\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg\",role:\"document\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-content\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"block block-themed block-transparent mb-0\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"block-header bg-primary-dark\",children:[/*#__PURE__*/_jsx(\"h3\",{class:\"block-title\",children:\"Detalle del cambio en el antecedente\"}),/*#__PURE__*/_jsx(\"div\",{class:\"block-options\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn-block-option\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-fw fa-times\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"block-content\",style:{'height':'300px','overflow':'scroll','display':'block'},children:[\"Observaciones: \",getAntecedenteSeleccionado?getAntecedenteSeleccionado.attributes.descripcion:\"\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),getListaDetalleCambios.data.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsx(\"spam\",{class:\"block-title\",children:\"Historial de cambios en el antecedente\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"block-content\",style:{'height':'300px','overflow':'scroll','display':'block'},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-striped table-vcenter js-dataTable-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Usuario Registra\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dependencia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:listaDetalleCambios()})]})})]}):null,/*#__PURE__*/_jsx(\"div\",{class:\"block-content block-content-full text-right bg-light\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-sm btn-primary\",\"data-dismiss\":\"modal\",children:\"Cerrar\"})})]})})})})]}):null})]});}}];var _useState17=useState({data:[],links:[],meta:[]}),_useState18=_slicedToArray(_useState17,2),getAntecedentesLista=_useState18[0],setAntecedentesLista=_useState18[1];var _useState19=useState({data:[],links:[],meta:[]}),_useState20=_slicedToArray(_useState19,2),getListaDetalleCambios=_useState20[0],setListaDetalleCambios=_useState20[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var dataCierreEtapa;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.showSpinner(true);setEstadoLista(\"Activos\");cargarAntecedentes(1,paganationPerPages,\"1\");// VALIDA CIERRE DE ETAPA EVALUACION\ndataCierreEtapa={\"data\":{\"type\":\"cerrar_etapa\",\"attributes\":{\"id_proceso_disciplinario\":procesoDisciplinarioId,\"id_etapa\":1,\"id_delegada\":\"id_delegada\",\"id_funcionario\":\"id_funcionario\"}}};CierreEtapaApi.getCierreEtapaByIdProcesoDisciplinario(dataCierreEtapa).then(function(datos){if(!datos.error){if(datos[\"data\"].length>0){setEstadoEtapaCapturaReparto(true);}}else{setErrorApi(datos.error.toString());window.showModal(1);}});case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var cargarAntecedentes=function cargarAntecedentes(page,perPage,estado){var data={\"data\":{\"type\":'antecedente',\"attributes\":{\"antecedentes\":\"antecedentes\",\"descripcion\":\"descripcion\",\"id_proceso_disciplinario\":procesoDisciplinarioId,\"fecha_registro\":Date.now(),\"id_dependencia\":-1,\"estado\":estado,'per_page':perPage,'current_page':page}}};console.log(JSON.stringify(data));if(hasAccess('CR_Antecedente','Consultar')){GenericApi.getByDataGeneric('antencedentes/get-antecedentes/'+procesoDisciplinarioId,data).then(function(datos){if(!datos.error){setAntecedentesLista(datos);try{if(datos.data.length>0){from.antecedente=datos.data[0].attributes.descripcion;}}catch(error){console.log(error);}window.showSpinner(false);}else{window.showSpinner(false);window.showModal(1);}});}else{window.showSpinner(false);}};var handlePageChange=function handlePageChange(page){// window.showSpinner(true);\nsetPageActual(page);//cargarAntecedentes(page, perPage, (getEstadoLista == \"Inactivos\" ? '0' : \"1\"));\n};var handlePerRowsChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newPerPage,page){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://window.showSpinner(true);\nsetPerPage(newPerPage);setPageActual(page);//cargarAntecedentes(page, newPerPage, (getEstadoLista == \"Inactivos\" ? '0' : \"1\"));\ncase 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePerRowsChange(_x,_x2){return _ref.apply(this,arguments);};}();var cargarDetalleCambiosEstado=function cargarDetalleCambiosEstado(antecedente){setAntecedenteSeleccionado(antecedente);GenericApi.getByIdGeneric('log-proceso-disciplinario/get-log-proceso',antecedente.id).then(function(datos){return!datos.error?setListaDetalleCambios(datos):window.showModal(1);});};var listaDetalleCambios=function listaDetalleCambios(){if(getListaDetalleCambios.data!=null&&typeof getListaDetalleCambios.data!='undefined'){return getListaDetalleCambios.data.map(function(cambio,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:cambio.attributes.funcionario_registra?cambio.attributes.funcionario_registra.nombre+' '+cambio.attributes.funcionario_registra.apellido:\"\"}),/*#__PURE__*/_jsx(\"td\",{children:cambio.attributes.dependencia_origen?cambio.attributes.dependencia_origen.nombre:\"\"}),/*#__PURE__*/_jsx(\"td\",{title:cambio.attributes.descripcion,children:/*#__PURE__*/_jsx(_Fragment,{children:cambio.attributes.descripcion.length>global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION?/*#__PURE__*/_jsxs(\"td\",{title:cambio.attributes.descripcion,children:[cambio.attributes.descripcion.substring(0,global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION),\"...\"]}):/*#__PURE__*/_jsx(\"td\",{title:cambio.attributes.descripcion,children:cambio.attributes.descripcion})})}),/*#__PURE__*/_jsx(\"td\",{children:cambio.attributes.created_at})]},cambio.id);});}};var handleCallback=function handleCallback(childData){try{window.showSpinner(true);setEstadoLista(childData==global.Constants.ESTADOS.INACTIVO?\"Inactivos\":\"Activos\");cargarAntecedentes(1,paganationPerPages,childData);}catch(error){}};return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfoErrorApi,{error:errorApi}),/*#__PURE__*/_jsx(InfoExitoApi,{}),/*#__PURE__*/_jsx(Formik,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"block block-rounded block-bordered\",children:/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb breadcrumb-alt push\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"breadcrumb-item\",children:[\" \",/*#__PURE__*/_jsx(Link,{underline:\"hover\",className:\"text-dark\",to:\"/MisPendientes\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Mis Pendientes\"})})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"breadcrumb-item\",children:[\" \",/*#__PURE__*/_jsx(Link,{underline:\"hover\",className:\"text-dark\",to:\"/RamasProceso/\",state:{from:from},children:/*#__PURE__*/_jsx(\"small\",{children:\"Ramas del proceso\"})})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"breadcrumb-item\",children:[\" \",/*#__PURE__*/_jsx(\"small\",{children:\"Antecedentes\"})]})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"block block-themed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"block-header\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"block-title\",children:[\"SINPROC No \",radicado,\" :: \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"Consultar lista de Antecedentes \",getEstadoLista]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group \",children:/*#__PURE__*/_jsx(Field,{type:\"text\",id:\"search\",value:getSeach,onChange:function onChange(e){return setSeach(e.target.value);},onKeyPress:function onKeyPress(e){e.key==='Enter'&&e.preventDefault();},name:\"search\",className:\"form-control border border-success\",placeholder:\"Buscar\"})})}),/*#__PURE__*/_jsx(ListaBotones,{getRoutes:getRoutes,from:from,parentCallback:handleCallback,id:\"botonesNavegacion\",name:\"botonesNavegacion\"})]}),hasAccess('CR_Antecedente','Consultar')?/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 mt-2 mb-2\",children:/*#__PURE__*/_jsx(DataTable,{className:\"table table-bordered table-striped table-vcenter js-dataTable-full\",columns:columns,data:getAntecedentesLista.data.filter(function(suggestion){if(getSeach===\"\"){return suggestion;}else if((suggestion.attributes.descripcion+suggestion.attributes.nombre_completo+suggestion.attributes.nombre_dependencia+suggestion.attributes.fecha_creado+suggestion.attributes.etapa.nombre+(suggestion.attributes.estado==global.Constants.ESTADOS.ACTIVO?'Activo':'Inactivo')+suggestion.attributes.fecha_registro+suggestion.attributes.descripcion).toLowerCase().includes(getSeach.toLowerCase())){return suggestion;}}),perPage:perPage,page:pageActual,pagination:true,noDataComponent:global.Constants.DATA_TABLE.SIN_DATOS_TABLE,paginationTotalRows:getAntecedentesLista.data.length,onChangePage:handlePageChange,onChangeRowsPerPage:handlePerRowsChange,striped:true,paginationComponentOptions:{rowsPerPageText:global.Constants.DATA_TABLE.FILTRO_POR_PAGINA}})}):null]})})]})]})})]});}export default AntecedentesLista;","map":{"version":3,"sources":["C:/w2d/personeria/personeria-ui/src/components/RamasProceso/Antecedentes/AntecedentesLista.js"],"names":["React","useEffect","useState","ErrorMessage","Field","Form","Formik","InfoErrorApi","InfoExitoApi","Link","Spinner","CierreEtapaApi","useLocation","ListaBotones","hasAccess","GenericApi","DataTable","AntecedentesLista","location","from","state","radicado","procesoDisciplinarioId","id_etapa","idEtapa","paganationPerPages","process","env","PAGINATION_PER_PAGE","perPage","setPerPage","pageActual","setPageActual","errorApi","setErrorApi","getSeach","setSeach","id_fase","global","Constants","FASES","ANTECEDENTES","crear_registro","consultar_registros","adjuntar_documento","repositorio_documentos","modulo","funcionalidad_crear","funcionalidad_consultar","muestra_atras","getRoutes","setRoutes","estadoEtapaCapturaReparto","setEstadoEtapaCapturaReparto","getEstadoLista","setEstadoLista","getAntecedenteSeleccionado","setAntecedenteSeleccionado","columns","name","cell","antecedente","attributes","nombre_completo","etapa","nombre","selector","sortable","width","fecha_creado","nombre_dependencia","descripcion","length","TEXT_AREA","CANTIDAD_MINIMA_DESCRIPCION","substring","estado","cargarDetalleCambiosEstado","id","getAntecedentesLista","data","getListaDetalleCambios","listaDetalleCambios","links","meta","setAntecedentesLista","setListaDetalleCambios","fetchData","window","showSpinner","cargarAntecedentes","dataCierreEtapa","getCierreEtapaByIdProcesoDisciplinario","then","datos","error","toString","showModal","page","Date","now","console","log","JSON","stringify","getByDataGeneric","handlePageChange","handlePerRowsChange","newPerPage","getByIdGeneric","map","cambio","i","funcionario_registra","apellido","dependencia_origen","created_at","handleCallback","childData","ESTADOS","INACTIVO","e","target","value","key","preventDefault","filter","suggestion","ACTIVO","fecha_registro","toLowerCase","includes","DATA_TABLE","SIN_DATOS_TABLE","rowsPerPageText","FILTRO_POR_PAGINA"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { ErrorMessage, Field, Form, Formik } from 'formik';\r\nimport InfoErrorApi from '../../Utils/InfoErrorApi';\r\nimport InfoExitoApi from '../../Utils/InfoExitoApi';\r\nimport { Link } from \"react-router-dom\";\r\nimport Spinner from '../../Utils/Spinner';\r\nimport CierreEtapaApi from '../../Api/Services/CierreEtapaApi';\r\nimport { useLocation } from 'react-router-dom'\r\nimport ListaBotones from '../../Utils/ListaBotones';\r\nimport { hasAccess } from '../../../components/Utils/Common';\r\nimport GenericApi from './../../Api/Services/GenericApi';\r\nimport DataTable from 'react-data-table-component';\r\nimport '../../Utils/Constants';\r\n\r\nfunction AntecedentesLista() {\r\n\r\n    const location = useLocation()\r\n    const { from } = location.state\r\n    let radicado = from.radicado;\r\n    let procesoDisciplinarioId = from.procesoDisciplinarioId;\r\n    let id_etapa = from.idEtapa;\r\n    const paganationPerPages = process.env.PAGINATION_PER_PAGE;\r\n    const [perPage, setPerPage] = useState(process.env.PAGINATION_PER_PAGE);\r\n    const [pageActual, setPageActual] = useState(1);\r\n    const [errorApi, setErrorApi] = useState('');\r\n    const [getSeach, setSeach] = useState('');\r\n\r\n    const [getRoutes, setRoutes] = useState({\r\n        id_etapa: id_etapa,\r\n        id_fase: global.Constants.FASES.ANTECEDENTES,\r\n        crear_registro: \"/AntencentesForm\",\r\n        consultar_registros: \"/AntencentesLista\",\r\n        adjuntar_documento: \"/SoporteRadicadoForm\",\r\n        repositorio_documentos: \"/SoporteRadicadoLista\",\r\n        modulo: \"CR_Antecedente\",\r\n        funcionalidad_crear: \"Crear\",\r\n        funcionalidad_consultar: \"Consultar\",\r\n        muestra_atras: true\r\n    });\r\n\r\n    const [estadoEtapaCapturaReparto, setEstadoEtapaCapturaReparto] = useState(false);\r\n    const [getEstadoLista, setEstadoLista] = useState('');\r\n    const [getAntecedenteSeleccionado, setAntecedenteSeleccionado] = useState('');\r\n\r\n    const columns = [\r\n        {\r\n            name: 'Registrado por',\r\n\r\n            cell: antecedente => <div>{antecedente.attributes.nombre_completo}<br />\r\n                <strong>Etapa: </strong>{antecedente.attributes.etapa.nombre}</div>,\r\n            selector: antecedente => antecedente.attributes.nombre_completo,\r\n            sortable: true,\r\n            width: \"20%\"\r\n        },\r\n        {\r\n            name: 'Fecha registro',\r\n            cell: antecedente => antecedente.attributes.fecha_creado,\r\n            selector: antecedente => antecedente.attributes.fecha_creado,\r\n            sortable: true,\r\n            width: \"10%\"\r\n        },\r\n        {\r\n            name: 'Dependencia',\r\n            cell: antecedente => antecedente.attributes.nombre_dependencia,\r\n            selector: antecedente => antecedente.attributes.nombre_dependencia,\r\n            sortable: true,\r\n            width: \"15%\",\r\n        },\r\n        {\r\n            name: 'DescripciÃ³n',\r\n\r\n            cell: antecedente =>\r\n                <div title={antecedente.attributes.descripcion}>\r\n                    {antecedente.attributes.descripcion.length > global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION ? (antecedente.attributes.descripcion.substring(0, global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION) + \"...\") : (antecedente.attributes.descripcion)}\r\n                </div>,\r\n\r\n            selector: antecedente => antecedente.attributes.descripcion,\r\n            sortable: true,\r\n            width: \"25%\",\r\n        },\r\n        {\r\n            name: 'Estado',\r\n            selector: antecedente => (antecedente.attributes.estado == \"1\" ? 'Activo' : 'Inactivo'),\r\n            sortable: true,\r\n            width: \"15%\",\r\n        },\r\n        {\r\n            name: 'Acciones',\r\n            width: \"15%\",\r\n\r\n            cell: antecedente => <div className='row'>\r\n                <div className='col-4'>\r\n                    <button type='button' title='Consultar Antecedente' className='btn btn-sm btn-primary inline' data-toggle=\"modal\" onClick={() => cargarDetalleCambiosEstado(antecedente)} data-target={'#modal-consultar-detalle'}><i class=\"fas fa-search\"></i></button>\r\n                </div>\r\n                <div className='col'>\r\n                    {\r\n                        (hasAccess('CR_Antecedente', 'Inactivar')) ? (\r\n                            <div>\r\n\r\n                                {\r\n                                    (antecedente.attributes.estado == 0) ? (\r\n                                        <Link to={`/AntecedentesCambiarEstadoForm/${antecedente.id}`} state={{ from: from }}>\r\n                                            <button type='button' title='Activar Antecedente' className='btn btn-sm btn-success' data-toggle=\"modal\" data-target={'#modal-cambiar-estado'}><i className=\"fas fa-plus-circle\"></i></button>\r\n                                        </Link>\r\n                                    ) : null\r\n                                }\r\n\r\n                                {\r\n                                    (antecedente.attributes.estado == 1 && (getAntecedentesLista.data.length > 1 || pageActual > 1)) ? (\r\n                                        <Link to={`/AntecedentesCambiarEstadoForm/${antecedente.id}`} state={{ from: from }}>\r\n                                            <button type='button' title='Inactivar Antecedente' className='btn btn-sm btn-danger'><i className=\"fas fa-minus-circle\"></i></button>\r\n                                        </Link>\r\n\r\n\r\n                                    ) : null\r\n                                }\r\n\r\n                                <div className=\"modal fade\" id={'modal-consultar-detalle'} tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modal-block-normal\" aria-hidden=\"true\">\r\n                                    <div className=\"modal-dialog modal-lg\" role=\"document\" >\r\n                                        <div class=\"modal-content\">\r\n                                            <div class=\"block block-themed block-transparent mb-0\">\r\n                                                <div class=\"block-header bg-primary-dark\">\r\n                                                    <h3 class=\"block-title\">Detalle del cambio en el antecedente</h3>\r\n                                                    <div class=\"block-options\">\r\n                                                        <button type=\"button\" class=\"btn-block-option\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                                            <i class=\"fa fa-fw fa-times\"></i>\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"block-content\" style={{ 'height': '300px', 'overflow': 'scroll', 'display': 'block' }}>\r\n                                                    Observaciones: {(getAntecedenteSeleccionado) ? getAntecedenteSeleccionado.attributes.descripcion : \"\"}<br /><br />\r\n                                                </div>\r\n                                                {\r\n                                                    (getListaDetalleCambios.data.length > 0) ? (\r\n                                                        <div>\r\n                                                            <div className=\"block-content\">\r\n                                                                <spam class=\"block-title\">Historial de cambios en el antecedente</spam>\r\n                                                            </div>\r\n\r\n                                                            <div class=\"block-content\" style={{ 'height': '300px', 'overflow': 'scroll', 'display': 'block' }}>\r\n                                                                <table className=\"table table-bordered table-striped table-vcenter js-dataTable-full\">\r\n                                                                    <thead>\r\n                                                                        <tr>\r\n                                                                            <th>Usuario Registra</th>\r\n                                                                            <th>Dependencia</th>\r\n                                                                            <th>DescripciÃ³n</th>\r\n                                                                            <th>Fecha</th>\r\n                                                                        </tr>\r\n                                                                    </thead>\r\n                                                                    <tbody>\r\n                                                                        {listaDetalleCambios()}\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    ) : null\r\n                                                }\r\n\r\n\r\n                                                <div class=\"block-content block-content-full text-right bg-light\">\r\n                                                    <button type=\"button\" class=\"btn btn-sm btn-primary\" data-dismiss=\"modal\">Cerrar</button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ) : null\r\n                    }\r\n                </div>\r\n            </div>\r\n        }\r\n    ];\r\n\r\n\r\n    const [getAntecedentesLista, setAntecedentesLista] = useState({ data: [], links: [], meta: [] });\r\n    const [getListaDetalleCambios, setListaDetalleCambios] = useState({ data: [], links: [], meta: [] });\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        async function fetchData() {\r\n\r\n            window.showSpinner(true);\r\n            setEstadoLista(\"Activos\");\r\n\r\n            cargarAntecedentes(1, paganationPerPages, \"1\");\r\n\r\n            // VALIDA CIERRE DE ETAPA EVALUACION\r\n            const dataCierreEtapa = {\r\n\r\n                \"data\": {\r\n                    \"type\": \"cerrar_etapa\",\r\n                    \"attributes\": {\r\n                        \"id_proceso_disciplinario\": procesoDisciplinarioId,\r\n                        \"id_etapa\": 1,\r\n                        \"id_delegada\": \"id_delegada\",\r\n                        \"id_funcionario\": \"id_funcionario\"\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n\r\n\r\n            CierreEtapaApi.getCierreEtapaByIdProcesoDisciplinario(dataCierreEtapa).then(\r\n                datos => {\r\n\r\n                    if (!datos.error) {\r\n                        if (datos[\"data\"].length > 0) {\r\n                            setEstadoEtapaCapturaReparto(true);\r\n                        }\r\n                    }\r\n                    else {\r\n                        setErrorApi(datos.error.toString())\r\n                        window.showModal(1)\r\n                    }\r\n                }\r\n            )\r\n\r\n        }\r\n        fetchData();\r\n    }, []);\r\n\r\n    const cargarAntecedentes = (page, perPage, estado) => {\r\n\r\n        const data = {\r\n            \"data\": {\r\n                \"type\": 'antecedente',\r\n                \"attributes\": {\r\n                    \"antecedentes\": \"antecedentes\",\r\n                    \"descripcion\": \"descripcion\",\r\n                    \"id_proceso_disciplinario\": procesoDisciplinarioId,\r\n                    \"fecha_registro\": Date.now(),\r\n                    \"id_dependencia\": -1,\r\n                    \"estado\": estado,\r\n                    'per_page': perPage,\r\n                    'current_page': page\r\n                }\r\n            }\r\n        }\r\n        console.log(JSON.stringify(data));\r\n\r\n        if (hasAccess('CR_Antecedente', 'Consultar')) {\r\n\r\n            GenericApi.getByDataGeneric('antencedentes/get-antecedentes/' + procesoDisciplinarioId, data).then(\r\n                datos => {\r\n                    if (!datos.error) {\r\n\r\n                        setAntecedentesLista(datos);\r\n\r\n                        try {\r\n                            if (datos.data.length > 0) {\r\n                                from.antecedente = datos.data[0].attributes.descripcion;\r\n                            }\r\n                        } catch (error) {\r\n                            console.log(error);\r\n                        }\r\n\r\n\r\n\r\n                        window.showSpinner(false);\r\n                    }\r\n                    else {\r\n                        window.showSpinner(false);\r\n                        window.showModal(1);\r\n\r\n                    }\r\n\r\n                }\r\n            )\r\n        }\r\n        else {\r\n            window.showSpinner(false)\r\n        }\r\n    }\r\n\r\n    const handlePageChange = page => {\r\n\r\n        // window.showSpinner(true);\r\n        setPageActual(page);\r\n        //cargarAntecedentes(page, perPage, (getEstadoLista == \"Inactivos\" ? '0' : \"1\"));\r\n    }\r\n\r\n    const handlePerRowsChange = async (newPerPage, page) => {\r\n\r\n        //window.showSpinner(true);\r\n        setPerPage(newPerPage);\r\n        setPageActual(page);\r\n        //cargarAntecedentes(page, newPerPage, (getEstadoLista == \"Inactivos\" ? '0' : \"1\"));\r\n\r\n\r\n\r\n    }\r\n\r\n    const cargarDetalleCambiosEstado = (antecedente) => {\r\n\r\n        setAntecedenteSeleccionado(antecedente);\r\n        GenericApi.getByIdGeneric('log-proceso-disciplinario/get-log-proceso', antecedente.id).then(\r\n            datos => !datos.error ? (setListaDetalleCambios(datos)) : (window.showModal(1)));\r\n    }\r\n\r\n    const listaDetalleCambios = () => {\r\n        if (getListaDetalleCambios.data != null && typeof (getListaDetalleCambios.data) != 'undefined') {\r\n            return (\r\n\r\n\r\n\r\n                getListaDetalleCambios.data.map((cambio, i) => {\r\n                    return (\r\n                        <tr key={cambio.id}>\r\n                            <td>\r\n                                {cambio.attributes.funcionario_registra ? cambio.attributes.funcionario_registra.nombre + ' ' + cambio.attributes.funcionario_registra.apellido : \"\"}\r\n                            </td>\r\n                            <td>\r\n                                {cambio.attributes.dependencia_origen ? cambio.attributes.dependencia_origen.nombre : \"\"}\r\n                            </td>\r\n                            <td title={cambio.attributes.descripcion}>\r\n                                <>\r\n                                    {\r\n                                        (cambio.attributes.descripcion.length > global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION) ? (\r\n                                                <td title={cambio.attributes.descripcion}>\r\n                                                    {cambio.attributes.descripcion.substring(0, global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION)}...\r\n                                                </td>\r\n                                            ) :\r\n                                            (\r\n                                                <td title={cambio.attributes.descripcion}>\r\n                                                    {cambio.attributes.descripcion}\r\n                                                </td>\r\n                                            )\r\n                                    }\r\n                                </>\r\n                            </td>\r\n                            <td>\r\n                                {cambio.attributes.created_at}\r\n                            </td>\r\n                        </tr>\r\n                    )\r\n                })\r\n            )\r\n        }\r\n    }\r\n\r\n    const handleCallback = (childData) => {\r\n        try {\r\n            window.showSpinner(true);\r\n            setEstadoLista(childData == global.Constants.ESTADOS.INACTIVO ? \"Inactivos\" : \"Activos\")\r\n            cargarAntecedentes(1, paganationPerPages, childData);\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <> <Spinner />\r\n            {<InfoErrorApi error={errorApi} />}\r\n            {<InfoExitoApi />}\r\n\r\n            <Formik>\r\n                <Form>\r\n\r\n                    <div className=\"block block-rounded block-bordered\">\r\n                        <div className=\"block-content\">\r\n                            <nav aria-label=\"breadcrumb\">\r\n                                <ol className=\"breadcrumb breadcrumb-alt push\">\r\n\r\n                                    <li className=\"breadcrumb-item\"> <Link underline=\"hover\" className=\"text-dark\" to={`/MisPendientes`}><small>Mis Pendientes</small></Link></li>\r\n                                    <li className=\"breadcrumb-item\"> <Link underline=\"hover\" className=\"text-dark\" to={`/RamasProceso/`} state={{ from: from }}><small>Ramas del proceso</small></Link></li>\r\n                                    <li className=\"breadcrumb-item\"> <small>Antecedentes</small></li>\r\n                                </ol>\r\n                            </nav>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n                    <div className=\"block block-themed\">\r\n                        <div className=\"block-header\">\r\n                            <h3 className=\"block-title\">SINPROC No {radicado} :: <strong>Consultar lista de Antecedentes {getEstadoLista}</strong></h3>\r\n                        </div>\r\n                        <div className=\"block-content\">\r\n                            <>\r\n\r\n                                <div className='row'>\r\n\r\n                                    <div className='col-md-3'>\r\n                                        <div className=\"form-group \">\r\n                                            <Field type=\"text\" id=\"search\" value={getSeach} onChange={e => setSeach(e.target.value)} onKeyPress={(e) => { e.key === 'Enter' && e.preventDefault(); }} name=\"search\" className=\"form-control border border-success\" placeholder=\"Buscar\" />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/*ListaBotones(getRoutes)*/}\r\n                                    <ListaBotones getRoutes={getRoutes} from={from} parentCallback={handleCallback} id=\"botonesNavegacion\" name=\"botonesNavegacion\" />\r\n\r\n\r\n                                </div>\r\n\r\n\r\n                                {\r\n                                    (hasAccess('CR_Antecedente', 'Consultar')) ? (\r\n                                        <div className='col-md-12 mt-2 mb-2'>\r\n                                            <DataTable className=\"table table-bordered table-striped table-vcenter js-dataTable-full\"\r\n                                                columns={columns}\r\n                                                data={getAntecedentesLista.data.filter((suggestion) => {\r\n                                                    if (getSeach === \"\") {\r\n                                                        return suggestion;\r\n                                                    } else if (\r\n\r\n                                                        ((suggestion.attributes.descripcion\r\n                                                            + suggestion.attributes.nombre_completo + suggestion.attributes.nombre_dependencia +\r\n                                                            suggestion.attributes.fecha_creado + suggestion.attributes.etapa.nombre +\r\n                                                            (suggestion.attributes.estado == global.Constants.ESTADOS.ACTIVO ? 'Activo' : 'Inactivo') + suggestion.attributes.fecha_registro +\r\n                                                            suggestion.attributes.descripcion).toLowerCase().includes(getSeach.toLowerCase()))\r\n\r\n                                                    ) {\r\n                                                        return suggestion;\r\n                                                    }\r\n                                                })}\r\n                                                perPage={perPage}\r\n                                                page={pageActual}\r\n                                                pagination\r\n                                                noDataComponent={global.Constants.DATA_TABLE.SIN_DATOS_TABLE}\r\n                                                paginationTotalRows={getAntecedentesLista.data.length}\r\n                                                onChangePage={handlePageChange}\r\n                                                onChangeRowsPerPage={handlePerRowsChange}\r\n                                                striped\r\n                                                paginationComponentOptions={{ rowsPerPageText: global.Constants.DATA_TABLE.FILTRO_POR_PAGINA }}\r\n                                            />\r\n                                        </div>\r\n                                    ) : null\r\n                                }\r\n                            </>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                </Form>\r\n            </Formik>\r\n        </>\r\n    );\r\n}\r\n\r\n\r\nexport default AntecedentesLista;"]},"metadata":{},"sourceType":"module"}