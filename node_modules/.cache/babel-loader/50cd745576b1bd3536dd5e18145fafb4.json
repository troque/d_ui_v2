{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createCoercers = createCoercers;\nvar _utils = require(\"./utils\");\nfunction createCoercers(_ref) {\n  var initialValues = _ref.initialValues,\n    stateRef = _ref.stateRef,\n    skin = _ref.skin,\n    notify = _ref.notify,\n    schema = _ref.schema;\n  return function coercedSubmit(doc) {\n    var coerceObject = function coerceObject(_ref2) {\n      var object = _ref2.object,\n        schemaDef = _ref2.schemaDef;\n      var fields = Object.keys(schemaDef);\n      var result = (0, _utils.deepmerge)({}, object);\n      fields.forEach(function (fieldName) {\n        var fieldSchema = schemaDef[fieldName];\n        var type = fieldSchema.type;\n        var typeKey = (0, _utils.schemaTypeEx)(type);\n        var _ref3 = fieldSchema.coerce ? fieldSchema : skin[typeKey],\n          coerce = _ref3.coerce;\n        var value = object[fieldName];\n        if (coerce) {\n          result[fieldName] = coerce(value, {\n            coerceObject: coerceObject,\n            schemaDef: schemaDef,\n            fieldName: fieldName\n          });\n        }\n      });\n      return result;\n    };\n    var coerceWithSchema = function coerceWithSchema(_ref4) {\n      var doc = _ref4.doc,\n        schema = _ref4.schema;\n      var schemaDef = schema.getSchema();\n      return coerceObject({\n        object: doc,\n        schemaDef: schemaDef\n      });\n    };\n    var fields = Object.keys(stateRef.current.fields);\n    var values = fields.reduce(function (values, field) {\n      var state = stateRef.current.fields[field];\n      if (state.visible) {\n        var _ref5 = (0, _utils.objectTraverse)(values, field, {\n            createIfMissing: true\n          }),\n          _ref6 = _slicedToArray(_ref5, 2),\n          container = _ref6[0],\n          attr = _ref6[1];\n        var _ref7 = (0, _utils.objectTraverse)(doc, field),\n          _ref8 = _slicedToArray(_ref7, 1),\n          docContainer = _ref8[0];\n        if (container && attr) {\n          if (state.changed) container[attr] = state.value;else if (docContainer) container[attr] = docContainer[attr];\n        }\n      }\n      return values;\n    }, {});\n    var wholeObj = (0, _utils.deepmerge)({}, initialValues, values);\n    var coerced = coerceWithSchema({\n      doc: wholeObj,\n      schema: schema\n    });\n    notify(coerced, doc);\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","createCoercers","_utils","require","initialValues","stateRef","skin","notify","schema","coercedSubmit","doc","coerceObject","object","schemaDef","fields","keys","result","deepmerge","forEach","fieldName","fieldSchema","type","typeKey","schemaTypeEx","coerce","coerceWithSchema","getSchema","current","values","reduce","field","state","visible","objectTraverse","createIfMissing","container","attr","docContainer","changed","wholeObj","coerced"],"sources":["C:/w2d/personeria/personeria-ui/node_modules/react-hook-form-auto/lib/coercing.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createCoercers = createCoercers;\n\nvar _utils = require(\"./utils\");\n\nfunction createCoercers({\n  initialValues,\n  stateRef,\n  skin,\n  notify,\n  schema\n}) {\n  return function coercedSubmit(doc) {\n    const coerceObject = ({\n      object,\n      schemaDef\n    }) => {\n      const fields = Object.keys(schemaDef);\n      const result = (0, _utils.deepmerge)({}, object);\n      fields.forEach(fieldName => {\n        const fieldSchema = schemaDef[fieldName];\n        const {\n          type\n        } = fieldSchema;\n        const typeKey = (0, _utils.schemaTypeEx)(type);\n        const {\n          coerce\n        } = fieldSchema.coerce ? fieldSchema : skin[typeKey];\n        const value = object[fieldName];\n\n        if (coerce) {\n          result[fieldName] = coerce(value, {\n            coerceObject,\n            schemaDef,\n            fieldName\n          });\n        }\n      });\n      return result;\n    };\n\n    const coerceWithSchema = ({\n      doc,\n      schema\n    }) => {\n      const schemaDef = schema.getSchema();\n      return coerceObject({\n        object: doc,\n        schemaDef\n      });\n    };\n\n    const fields = Object.keys(stateRef.current.fields);\n    const values = fields.reduce((values, field) => {\n      const state = stateRef.current.fields[field];\n\n      if (state.visible) {\n        const [container, attr] = (0, _utils.objectTraverse)(values, field, {\n          createIfMissing: true\n        });\n        const [docContainer] = (0, _utils.objectTraverse)(doc, field);\n\n        if (container && attr) {\n          if (state.changed) container[attr] = state.value;else if (docContainer) container[attr] = docContainer[attr];\n        }\n      }\n\n      return values;\n    }, {});\n    const wholeObj = (0, _utils.deepmerge)({}, initialValues, values);\n    const coerced = coerceWithSchema({\n      doc: wholeObj,\n      schema\n    });\n    notify(coerced, doc);\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}