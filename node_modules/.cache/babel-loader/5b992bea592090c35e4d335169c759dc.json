{"ast":null,"code":"import _asyncToGenerator from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\w2d\\\\personeria\\\\personeria-ui\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import GenericApi from'../../Api/Services/GenericApi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ModalCierreEtapaInfo(props){var location=useLocation();var from=location.state.from;var procesoDisciplinarioId=from.procesoDisciplinarioId;// Cierre de etapas\nvar _useState=useState({data:[],links:[],meta:[]}),_useState2=_slicedToArray(_useState,2),getInfoCierreEtapa_CR=_useState2[0],setInfoCierreEtapa_CR=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),getRtaCierreEtapa_CR=_useState4[0],setRtaCierreEtapa_CR=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={\"data\":{\"type\":\"log_disciplinario\",\"attributes\":{\"id_proceso_disciplinario\":procesoDisciplinarioId,\"id_etapa\":1}}};console.log(\"link: \"+JSON.stringify(data));GenericApi.getByDataGeneric('log-proceso-disciplinario/get-log-cierre-etapa',data).then(function(datos){console.log(\"Daticos\",datos);if(!datos.error){//console.log(JSON.stringify(datos));\nsetInfoCierreEtapa_CR(datos);setRtaCierreEtapa_CR(true);}});window.showSpinner(true);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var listaCierreEtapa=function listaCierreEtapa(){if(getInfoCierreEtapa_CR.data!=null&&typeof getInfoCierreEtapa_CR.data!='undefined'){return getInfoCierreEtapa_CR.data.map(function(etapa,i){console.log(\"INFO CIERRE DE ETAPA2\");return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:etapa.attributes.etapa.nombre}),/*#__PURE__*/_jsx(\"td\",{children:etapa.attributes.created_at}),/*#__PURE__*/_jsxs(\"td\",{children:[etapa.attributes.funcionario_registra.nombre,\" \",etapa.attributes.funcionario_registra.apellido]}),/*#__PURE__*/_jsxs(\"td\",{children:[etapa.attributes.dependencia_origen.nombre,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:\"Etapa revisada y aprobada por funcionario(a)\"})]},etapa.id);});}};/*const consultaCierreEtapa = (id_etapa) => {\r\n\r\n        const data = {\r\n            \"data\": {\r\n                \"type\": \"log_disciplinario\",\r\n                \"attributes\": {\r\n                    \"id_proceso_disciplinario\": procesoDisciplinarioId,\r\n                    \"id_etapa\": id_etapa,\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        console.log(\"link: \" + JSON.stringify(data));\r\n\r\n        GenericApi.getByDataGeneric('log-proceso-disciplinario/get-log-cierre-etapa/', data).then(\r\n            datos => {\r\n\r\n                if (!datos.error) {\r\n\r\n                    //console.log(JSON.stringify(datos));\r\n                    setInfoCierreEtapa_CR(datos);\r\n                    setRtaCierreEtapa_CR(true);\r\n                }\r\n\r\n                else {\r\n\r\n                    setErrorApi(datos.error.toString())\r\n                    window.showModal()\r\n                }\r\n            }\r\n        );\r\n\r\n        window.showSpinner(true);\r\n\r\n    }*/return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"modal\",id:'modal-consultar-detalle',tabIndex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"modal-block-normal\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-xl\",role:\"document\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"block block-themed block-transparent mb-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"block-header bg-primary-dark\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"block-title\",children:[\"Sinproc \",props===null||props===void 0?void 0:props.radicado,\" :::: Cierre de etapa\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"block-options\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-block-option\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-fw fa-times\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-striped table-vcenter js-dataTable-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Etapa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha registro\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Funcionario Registra\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dependencia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Detalle de cierre\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:getRtaCierreEtapa_CR?listaCierreEtapa():null})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"block-content block-content-full text-right bg-light\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",\"data-dismiss\":\"modal\",children:\"Cerrar\"})})]})})})})});}export default ModalCierreEtapaInfo;","map":{"version":3,"sources":["C:/w2d/personeria/personeria-ui/src/components/Utils/Modals/ModalCierreEtapaInfo.js"],"names":["React","useEffect","useState","useLocation","GenericApi","ModalCierreEtapaInfo","props","location","from","state","procesoDisciplinarioId","data","links","meta","getInfoCierreEtapa_CR","setInfoCierreEtapa_CR","getRtaCierreEtapa_CR","setRtaCierreEtapa_CR","fetchData","console","log","JSON","stringify","getByDataGeneric","then","datos","error","window","showSpinner","listaCierreEtapa","map","etapa","i","attributes","nombre","created_at","funcionario_registra","apellido","dependencia_origen","id","radicado"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport GenericApi from '../../Api/Services/GenericApi';\r\n\r\nfunction ModalCierreEtapaInfo(props) {\r\n    \r\n    const location = useLocation()\r\n    const { from } = location.state\r\n\r\n    let procesoDisciplinarioId = from.procesoDisciplinarioId;\r\n\r\n    // Cierre de etapas\r\n    const [getInfoCierreEtapa_CR, setInfoCierreEtapa_CR] = useState({ data: [], links: [], meta: [] });\r\n    const [getRtaCierreEtapa_CR, setRtaCierreEtapa_CR] = useState(false);\r\n\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            const data = {\r\n                \"data\": {\r\n                    \"type\": \"log_disciplinario\",\r\n                    \"attributes\": {\r\n                        \"id_proceso_disciplinario\": procesoDisciplinarioId,\r\n                        \"id_etapa\": 1,\r\n                    }\r\n    \r\n                }\r\n            }\r\n    \r\n            console.log(\"link: \" + JSON.stringify(data));\r\n    \r\n            GenericApi.getByDataGeneric('log-proceso-disciplinario/get-log-cierre-etapa', data).then(\r\n                datos => {\r\n                    console.log(\"Daticos\", datos);\r\n                    if (!datos.error) {\r\n    \r\n                        //console.log(JSON.stringify(datos));\r\n                        setInfoCierreEtapa_CR(datos);\r\n                        setRtaCierreEtapa_CR(true);\r\n                    }\r\n                }\r\n            );\r\n    \r\n            window.showSpinner(true);    \r\n\r\n        }\r\n        fetchData();\r\n    }, []);\r\n\r\n    const listaCierreEtapa = () => {\r\n\r\n        if (getInfoCierreEtapa_CR.data != null && typeof (getInfoCierreEtapa_CR.data) != 'undefined') {\r\n\r\n            return (\r\n\r\n                getInfoCierreEtapa_CR.data.map((etapa, i) => {\r\n                    console.log(\"INFO CIERRE DE ETAPA2\");\r\n\r\n                    return (\r\n\r\n                        <tr key={etapa.id}>\r\n                            <td>{etapa.attributes.etapa.nombre}</td>\r\n                            <td>{etapa.attributes.created_at}</td>\r\n                            <td>{etapa.attributes.funcionario_registra.nombre} {etapa.attributes.funcionario_registra.apellido}</td>\r\n                            <td>{etapa.attributes.dependencia_origen.nombre} </td>\r\n                            <td>Etapa revisada y aprobada por funcionario(a)</td>\r\n                        </tr>\r\n                    )\r\n                })\r\n            )\r\n        }\r\n    }\r\n\r\n    /*const consultaCierreEtapa = (id_etapa) => {\r\n\r\n        const data = {\r\n            \"data\": {\r\n                \"type\": \"log_disciplinario\",\r\n                \"attributes\": {\r\n                    \"id_proceso_disciplinario\": procesoDisciplinarioId,\r\n                    \"id_etapa\": id_etapa,\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        console.log(\"link: \" + JSON.stringify(data));\r\n\r\n        GenericApi.getByDataGeneric('log-proceso-disciplinario/get-log-cierre-etapa/', data).then(\r\n            datos => {\r\n\r\n                if (!datos.error) {\r\n\r\n                    //console.log(JSON.stringify(datos));\r\n                    setInfoCierreEtapa_CR(datos);\r\n                    setRtaCierreEtapa_CR(true);\r\n                }\r\n\r\n                else {\r\n\r\n                    setErrorApi(datos.error.toString())\r\n                    window.showModal()\r\n                }\r\n            }\r\n        );\r\n\r\n        window.showSpinner(true);\r\n\r\n    }*/\r\n\r\n    return (\r\n        <>\r\n            <div className=\"modal\" id={'modal-consultar-detalle'} tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"modal-block-normal\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-xl\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <div className=\"block block-themed block-transparent mb-0\">\r\n                                <div className=\"block-header bg-primary-dark\">\r\n                                    <h3 className=\"block-title\">Sinproc {props?.radicado} :::: Cierre de etapa</h3>\r\n                                    <div className=\"block-options\">\r\n                                        <button type=\"button\" className=\"btn-block-option\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                            <i className=\"fa fa-fw fa-times\"></i>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"block-content\">\r\n\r\n\r\n                                    <div className='col-md-12'>\r\n                                        <table className=\"table table-bordered table-striped table-vcenter js-dataTable-full\">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Etapa</th>\r\n                                                    <th>Fecha registro</th>\r\n                                                    <th>Funcionario Registra</th>\r\n                                                    <th>Dependencia</th>\r\n                                                    <th>Detalle de cierre</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                {getRtaCierreEtapa_CR ? listaCierreEtapa() : null}\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"block-content block-content-full text-right bg-light\">\r\n                                    <button type=\"button\" className=\"btn btn-sm btn-primary\" data-dismiss=\"modal\">Cerrar</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ModalCierreEtapaInfo;\r\n"]},"metadata":{},"sourceType":"module"}