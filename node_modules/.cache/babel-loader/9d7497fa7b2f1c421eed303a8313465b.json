{"ast":null,"code":"import _asyncToGenerator from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\w2d\\\\personeria\\\\personeria-ui\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{ErrorMessage,Field,Form,Formik}from'formik';import React,{useEffect,useState}from'react';import InfoErrorApi from'../Utils/InfoErrorApi';import InfoExitoApi from'../Utils/InfoExitoApi';import{Link}from\"react-router-dom\";import InteresadoEntidadPermitidaApi from'../Api/Services/InteresadoEntidadPermitidaApi';import Spinner from'../Utils/Spinner';import{hasAccess}from'../../components/Utils/Common';import DataTable from'react-data-table-component';import GenericApi from'../Api/Services/GenericApi';import'../Utils/Constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EntidadesInteresadoLista(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),errorApi=_useState2[0],setErrorApi=_useState2[1];var _useState3=useState({data:[],links:[],meta:[]}),_useState4=_slicedToArray(_useState3,2),entidadesPermitidasLista=_useState4[0],setEntidadesPermitidasLista=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),pageActual=_useState6[0],setPageActual=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),getSeach=_useState8[0],setSeach=_useState8[1];var paganationPerPages=global.Constants.DATA_TABLE.PAGINATION_PER_PAGE;var _useState9=useState(global.Constants.DATA_TABLE.PAGINATION_PER_PAGE),_useState10=_slicedToArray(_useState9,2),perPage=_useState10[0],setPerPage=_useState10[1];var columns=[{name:'Entidad',selector:function selector(entidadPerm){return entidadPerm.attributes.id_entidad+\" \"+entidadPerm.attributes.nombre_entidad;},sortable:true,width:\"40%\"},{name:'Fecha Registro',selector:function selector(entidadPerm){return entidadPerm.attributes.created_at;},sortable:true,width:\"30%\"},{name:'Estado',selector:function selector(entidadPerm){return entidadPerm.attributes.estado=='1'?'Activo':'Inactivo';},sortable:true},{name:'Acciones',cell:function cell(row){return hasAccess('EI_EntidadesPermitidasInteresado','Inactivar')?/*#__PURE__*/_jsxs(\"div\",{children:[row.attributes.estado==0?/*#__PURE__*/_jsx(\"button\",{type:\"button\",title:\"Activar\",onClick:function onClick(){return enviarDatos(1,row.id);},className:\"btn btn-sm btn-success\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-toggle-off\",children:\" \"})}):null,row.attributes.estado==1?/*#__PURE__*/_jsx(\"button\",{type:\"button\",title:\"Inacivar\",onClick:function onClick(){return enviarDatos(0,row.id);},className:\"btn btn-sm btn-danger\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-toggle-off\",children:\" \"})}):null]}):null;}}];useEffect(function(){window.showSpinner(true);function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cargarEntidadesPermitidas(1,paganationPerPages);case 1:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var cargarEntidadesPermitidas=function cargarEntidadesPermitidas(page,perPage){if(hasAccess('EI_EntidadesPermitidasInteresado','Consultar')){//GenericApi.getAllGeneric('mas-entidad-permitida/entidad-permitida-paginate' + '/' + page + '/' + perPage).then(\nGenericApi.getAllGeneric('mas-entidad-permitida').then(function(datos){if(!datos.error){setEntidadesPermitidasLista(datos);window.showSpinner(false);}else{window.showSpinner(false);window.showModal(1);}});}};var handlePageChange=function handlePageChange(page){// window.showSpinner(true);\nsetPageActual(page);//cargarEntidadesPermitidas(page, perPage);\n};var handlePerRowsChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newPerPage,page){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://window.showSpinner(true);\nsetPerPage(newPerPage);setPageActual(page);//cargarEntidadesPermitidas(page, newPerPage);\ncase 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePerRowsChange(_x,_x2){return _ref.apply(this,arguments);};}();var enviarDatos=function enviarDatos(estado,id){try{//actualizamos el estado\nwindow.showSpinner(true);var data={\"data\":{\"type\":\"mas_entidad_permitida\",\"attributes\":{\"estado\":estado}}};InteresadoEntidadPermitidaApi.updateInteresadoEntidadPermitida(data,id).then(function(datos){if(!datos.error){cargarEntidadesPermitidas(1,paganationPerPages);}else{//console.log(\"hay error\");\nconsole.log(datos.error);window.showSpinner(false);}//window.showSpinner(false);\n});}catch(error){window.showSpinner(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfoErrorApi,{error:errorApi}),/*#__PURE__*/_jsx(InfoExitoApi,{}),/*#__PURE__*/_jsx(Formik,{children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"block block-themed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"block-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"block-title\",children:\"Entidades permitidas\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsx(_Fragment,{children:hasAccess('EI_EntidadesPermitidasInteresado','Consultar')?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group \",children:/*#__PURE__*/_jsx(Field,{type:\"text\",id:\"search\",value:getSeach,onChange:function onChange(e){return setSeach(e.target.value);},onKeyPress:function onKeyPress(e){e.key==='Enter'&&e.preventDefault();},name:\"search\",className:\"form-control border border-success\",placeholder:\"Buscar\"})})}),/*#__PURE__*/_jsx(_Fragment,{children:hasAccess('EI_EntidadesPermitidasInteresado','Crear')?/*#__PURE__*/_jsx(\"div\",{className:\"col-md-9 text-right\",children:/*#__PURE__*/_jsx(Link,{to:\"/EntidadesInteresadoForm/\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",title:\"Agregar nuevo registro\",className:\"btn btn-primary\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" \"]})})}):null})]}),/*#__PURE__*/_jsx(DataTable,{className:\"table table-bordered table-striped table-vcenter js-dataTable-full\",columns:columns,data:entidadesPermitidasLista.data.filter(function(suggestion){if(getSeach===\"\"){return suggestion;}else if((suggestion.attributes.id_entidad+suggestion.attributes.nombre_entidad+suggestion.attributes.created_at+(suggestion.attributes.estado==\"1\"?'Activo':'Inactivo')).toLowerCase().includes(getSeach.toLowerCase())){return suggestion;}}),perPage:perPage,page:pageActual,pagination:true,noDataComponent:\"Sin datos\",paginationTotalRows:entidadesPermitidasLista.data.length,onChangePage:handlePageChange,onChangeRowsPerPage:handlePerRowsChange,defaultSortFieldId:\"Nombre\",striped:true,paginationComponentOptions:{rowsPerPageText:'Filas por página'},defaultSortAsc:false})]}):null})})]})})})]});}export default EntidadesInteresadoLista;","map":{"version":3,"sources":["C:/w2d/personeria/personeria-ui/src/components/EntidadesInteresado/EntidadesInteresadoLista.js"],"names":["ErrorMessage","Field","Form","Formik","React","useEffect","useState","InfoErrorApi","InfoExitoApi","Link","InteresadoEntidadPermitidaApi","Spinner","hasAccess","DataTable","GenericApi","EntidadesInteresadoLista","errorApi","setErrorApi","data","links","meta","entidadesPermitidasLista","setEntidadesPermitidasLista","pageActual","setPageActual","getSeach","setSeach","paganationPerPages","global","Constants","DATA_TABLE","PAGINATION_PER_PAGE","perPage","setPerPage","columns","name","selector","entidadPerm","attributes","id_entidad","nombre_entidad","sortable","width","created_at","estado","cell","row","enviarDatos","id","window","showSpinner","fetchData","cargarEntidadesPermitidas","page","getAllGeneric","then","datos","error","showModal","handlePageChange","handlePerRowsChange","newPerPage","updateInteresadoEntidadPermitida","console","log","e","target","value","key","preventDefault","filter","suggestion","toLowerCase","includes","length","rowsPerPageText"],"mappings":"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","sourcesContent":["import { ErrorMessage, Field, Form, Formik } from 'formik';\r\nimport React, { useEffect, useState } from 'react';\r\nimport InfoErrorApi from '../Utils/InfoErrorApi';\r\nimport InfoExitoApi from '../Utils/InfoExitoApi';\r\nimport { Link } from \"react-router-dom\";\r\nimport InteresadoEntidadPermitidaApi from '../Api/Services/InteresadoEntidadPermitidaApi';\r\nimport Spinner from '../Utils/Spinner';\r\nimport { hasAccess } from '../../components/Utils/Common';\r\nimport DataTable from 'react-data-table-component';\r\nimport GenericApi from '../Api/Services/GenericApi';\r\nimport '../Utils/Constants';\r\n\r\nfunction EntidadesInteresadoLista() {\r\n\r\n    const [errorApi, setErrorApi] = useState('');\r\n    const [entidadesPermitidasLista, setEntidadesPermitidasLista] = useState({ data: [], links: [], meta: [] });\r\n    const [pageActual, setPageActual] = useState(1);\r\n    const [getSeach, setSeach] = useState('');\r\n    const paganationPerPages = global.Constants.DATA_TABLE.PAGINATION_PER_PAGE;\r\n    const [perPage, setPerPage] = useState(global.Constants.DATA_TABLE.PAGINATION_PER_PAGE);\r\n\r\n    const columns = [\r\n        {\r\n            name: 'Entidad',\r\n            selector: entidadPerm => entidadPerm.attributes.id_entidad + \" \" + entidadPerm.attributes.nombre_entidad,\r\n            sortable: true,\r\n            width: \"40%\"\r\n        },\r\n        {\r\n            name: 'Fecha Registro',\r\n            selector: entidadPerm => entidadPerm.attributes.created_at,\r\n            sortable: true,\r\n            width: \"30%\"\r\n        },\r\n        {\r\n            name: 'Estado',\r\n            selector: entidadPerm => entidadPerm.attributes.estado == '1' ? 'Activo' : 'Inactivo',\r\n            sortable: true,\r\n        },\r\n        {\r\n            name: 'Acciones',\r\n\r\n\r\n            cell: row => (hasAccess('EI_EntidadesPermitidasInteresado', 'Inactivar')) ? (\r\n                <div>\r\n                    {\r\n                        (row.attributes.estado == 0) ? (\r\n                            <button type='button' title='Activar' onClick={() => enviarDatos(1, row.id)} className='btn btn-sm btn-success'><span className=\"fas fa-toggle-off\"> </span></button>\r\n                        ) : null\r\n                    }\r\n\r\n                    {\r\n                        (row.attributes.estado == 1) ? (\r\n                            <button type='button' title='Inacivar' onClick={() => enviarDatos(0, row.id)} className='btn btn-sm btn-danger'><span className=\"fas fa-toggle-off\"> </span></button>\r\n                        ) : null\r\n                    }\r\n                </div>\r\n            ) : null\r\n        }\r\n    ];\r\n\r\n\r\n    useEffect(() => {\r\n        window.showSpinner(true);\r\n        async function fetchData() {\r\n            cargarEntidadesPermitidas(1, paganationPerPages);\r\n\r\n        }\r\n        fetchData();\r\n    }, []);\r\n\r\n\r\n    const cargarEntidadesPermitidas = (page, perPage) => {\r\n\r\n        if (hasAccess('EI_EntidadesPermitidasInteresado', 'Consultar')) {\r\n\r\n            //GenericApi.getAllGeneric('mas-entidad-permitida/entidad-permitida-paginate' + '/' + page + '/' + perPage).then(\r\n            GenericApi.getAllGeneric('mas-entidad-permitida').then(\r\n                datos => {\r\n                    if (!datos.error) {\r\n                        setEntidadesPermitidasLista(datos);\r\n                        window.showSpinner(false);\r\n                    }\r\n                    else {\r\n                        window.showSpinner(false);\r\n                        window.showModal(1);\r\n\r\n                    }\r\n\r\n                }\r\n            )\r\n\r\n        }\r\n    }\r\n\r\n    const handlePageChange = page => {\r\n        // window.showSpinner(true);\r\n        setPageActual(page);\r\n        //cargarEntidadesPermitidas(page, perPage);\r\n    }\r\n\r\n    const handlePerRowsChange = async (newPerPage, page) => {\r\n        //window.showSpinner(true);\r\n        setPerPage(newPerPage);\r\n        setPageActual(page);\r\n        //cargarEntidadesPermitidas(page, newPerPage);\r\n    }\r\n\r\n\r\n    const enviarDatos = (estado, id) => {\r\n\r\n        try {\r\n\r\n\r\n            //actualizamos el estado\r\n            window.showSpinner(true);\r\n            const data = {\r\n\r\n                \"data\": {\r\n                    \"type\": \"mas_entidad_permitida\",\r\n                    \"attributes\": {\r\n                        \"estado\": estado\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n            InteresadoEntidadPermitidaApi.updateInteresadoEntidadPermitida(data, id).then(\r\n                datos => {\r\n\r\n                    if (!datos.error) {\r\n                        cargarEntidadesPermitidas(1, paganationPerPages);\r\n                    }\r\n                    else {\r\n                        //console.log(\"hay error\");\r\n                        console.log(datos.error);\r\n                        window.showSpinner(false)\r\n                    }\r\n                    //window.showSpinner(false);\r\n                }\r\n            )\r\n\r\n        } catch (error) {\r\n            window.showSpinner(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {<Spinner />}\r\n            {<InfoErrorApi error={errorApi} />}\r\n            {<InfoExitoApi />}\r\n            <Formik>\r\n                <Form>\r\n                    <div className=\"block block-themed\">\r\n                        <div className=\"block-header\">\r\n\r\n                            <h3 className=\"block-title\">Entidades permitidas</h3>\r\n\r\n\r\n                        </div>\r\n                        <div className=\"block-content\">\r\n\r\n                            <>\r\n                                {\r\n                                    (hasAccess('EI_EntidadesPermitidasInteresado', 'Consultar')) ? (\r\n                                        <div>\r\n                                            <div className='row'>\r\n\r\n                                                <div className='col-md-3'>\r\n                                                    <div className=\"form-group \">\r\n                                                        <Field type=\"text\" id=\"search\" value={getSeach} onChange={e => setSeach(e.target.value)} onKeyPress={(e) => { e.key === 'Enter' && e.preventDefault(); }} name=\"search\" className=\"form-control border border-success\" placeholder=\"Buscar\" />\r\n\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <>\r\n                                                    {\r\n                                                        (hasAccess('EI_EntidadesPermitidasInteresado', 'Crear')) ? (\r\n\r\n                                                            <div className='col-md-9 text-right'>\r\n                                                                <Link to={`/EntidadesInteresadoForm/`}>\r\n                                                                    <button type=\"button\" title='Agregar nuevo registro' className=\"btn btn-primary\"> <i className=\"fas fa-plus\"></i> </button>\r\n                                                                </Link>\r\n\r\n                                                            </div>\r\n                                                        ) : null\r\n                                                    }\r\n                                                </>\r\n                                            </div>\r\n\r\n\r\n                                            <DataTable className=\"table table-bordered table-striped table-vcenter js-dataTable-full\"\r\n                                                columns={columns}\r\n\r\n                                                data={entidadesPermitidasLista.data.filter((suggestion) => {\r\n                                                    if (getSeach === \"\") {\r\n                                                        return suggestion;\r\n                                                    } else if (\r\n                                                        ((suggestion.attributes.id_entidad\r\n                                                            + suggestion.attributes.nombre_entidad\r\n                                                            + (suggestion.attributes.created_at)\r\n                                                            + (suggestion.attributes.estado == \"1\" ? 'Activo' : 'Inactivo')).toLowerCase().includes(getSeach.toLowerCase()))\r\n\r\n                                                    ) {\r\n                                                        return suggestion;\r\n                                                    }\r\n                                                })}\r\n\r\n                                                perPage={perPage}\r\n                                                page={pageActual}\r\n                                                pagination\r\n                                                noDataComponent=\"Sin datos\"\r\n                                                paginationTotalRows={entidadesPermitidasLista.data.length}\r\n                                                onChangePage={handlePageChange}\r\n                                                onChangeRowsPerPage={handlePerRowsChange}\r\n                                                defaultSortFieldId=\"Nombre\"\r\n                                                striped\r\n                                                paginationComponentOptions={{ rowsPerPageText: 'Filas por página' }}\r\n                                                defaultSortAsc={false}\r\n                                            />\r\n\r\n                                        </div>\r\n\r\n                                    ) : null\r\n                                }\r\n                            </>\r\n                        </div>\r\n                    </div>\r\n                </Form>\r\n            </Formik>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default EntidadesInteresadoLista;"]},"metadata":{},"sourceType":"module"}