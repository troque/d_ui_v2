{"ast":null,"code":"import _asyncToGenerator from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/w2d/personeria/personeria-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\w2d\\\\personeria\\\\personeria-ui\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{ErrorMessage,Field,Form,Formik}from'formik';import React,{useEffect,useState}from'react';import{Link}from\"react-router-dom\";import EntidadInvestigadoApi from\"../../Api/Services/EntidadInvestigadoApi\";import{Navigate}from\"react-router-dom\";import CierreEtapaApi from'../../Api/Services/CierreEtapaApi';import{useLocation}from'react-router-dom';import Spinner from'../../Utils/Spinner';import{hasAccess}from'../../../components/Utils/Common';import ListaBotones from'../../Utils/ListaBotones';import GenericApi from'./../../Api/Services/GenericApi';import DataTable from'react-data-table-component';import'../../Utils/Constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EntidadInvestigadoLista(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),errorApi=_useState2[0],setErrorApi=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),estadoEtapaCapturaReparto=_useState4[0],setEstadoEtapaCapturaReparto=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),getEstadoLista=_useState6[0],setEstadoLista=_useState6[1];var _useState7=useState({data:[],links:[],meta:[]}),_useState8=_slicedToArray(_useState7,2),getListaDetalleCambios=_useState8[0],setListaDetalleCambios=_useState8[1];var paganationPerPages=global.Constants.DATA_TABLE.PAGINATION_PER_PAGE;var _useState9=useState(global.Constants.DATA_TABLE.PAGINATION_PER_PAGE),_useState10=_slicedToArray(_useState9,2),perPage=_useState10[0],setPerPage=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),pageActual=_useState12[0],setPageActual=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),getSeach=_useState14[0],setSeach=_useState14[1];var _useState15=useState({data:[],links:[],meta:[]}),_useState16=_slicedToArray(_useState15,2),entidadInvestigadoLista=_useState16[0],setEntidadInvestigadoLista=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),getEntidadSeleccionado=_useState18[0],setEntidadSeleccionado=_useState18[1];var location=useLocation();var from=location.state.from;var radicado=from.radicado;var procesoDisciplinarioId=from.procesoDisciplinarioId;var columns=[{name:'Entidad',selector:function selector(entidad){return entidad.attributes.nombre_entidad?entidad.attributes.nombre_entidad:\"NO_APLICA\";},sortable:true,width:\"30%\"},{name:'Detalle',selector:function selector(entidad){return entidad.attributes.created_at;},cell:function cell(entidad){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha de registro:\"}),\" \",entidad.attributes.created_at,/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sector:\"}),\" Pendiente\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nombre investigado:\"}),\" \",entidad.attributes.nombre_investigado?entidad.attributes.nombre_investigado:\"NO_APLICA\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Cargo investigado:\"}),\" \",entidad.attributes.cargo?entidad.attributes.cargo:\"NO_APLICA\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"small\",{title:entidad.attributes.observaciones?entidad.attributes.observaciones:\"\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Observaciones:\"}),\" \",entidad.attributes.observaciones?entidad.attributes.observaciones.length>global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION?entidad.attributes.observaciones.substring(0,global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION)+\"...\":entidad.attributes.observaciones:\"\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Registrado por:\"}),\" \",entidad.attributes.nombre_completo?entidad.attributes.nombre_completo:\"NO_APLICA\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Registrado en:\"}),\" \",entidad.attributes.nombre_entidad?entidad.attributes.nombre_entidad:\"NO_APLICA\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Estado:\"}),\" \",entidad.attributes.estado=='1'?'Activo':'Inactivo',/*#__PURE__*/_jsx(\"br\",{})]}),entidad.attributes.observaciones_estado?/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Justificaci\\xF3n cambio de estado:\"}),\" \",entidad.attributes.observaciones_estado,/*#__PURE__*/_jsx(\"br\",{})]}):null]});},sortable:true,width:\"30%\"},{name:'Acciones',cell:function cell(entidad){return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",title:\"Ver detalle Entidad del Investigado\",className:\"btn btn-sm btn-primary\",\"data-toggle\":\"modal\",onClick:function onClick(){return cargarDetalleCambiosEstado(entidad);},\"data-target\":'#modal-consultar-detalle',children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-search\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:hasAccess('CR_EntidadInvestigado','Inactivar')?/*#__PURE__*/_jsxs(\"div\",{children:[entidad.attributes.estado==global.Constants.ESTADOS.INACTIVO?/*#__PURE__*/_jsx(Link,{to:\"/EntidadInvestigadoCambiarEstadoForm/\".concat(entidad.id),state:{from:from},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",title:\"Activar Entidad\",className:\"btn btn-sm btn-success\",\"data-toggle\":\"modal\",\"data-target\":'#modal-cambiar-estado',children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})}):null,entidad.attributes.estado==global.Constants.ESTADOS.ACTIVO&&(entidadInvestigadoLista.data.length>1||pageActual>1)?/*#__PURE__*/_jsx(Link,{to:\"/EntidadInvestigadoCambiarEstadoForm/\".concat(entidad.id),state:{from:from},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",title:\"Inactivar Entidad\",className:\"btn btn-sm btn-danger\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})})}):null,/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:'modal-consultar-detalle',tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"modal-block-normal\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg\",role:\"document\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-content\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"block block-themed block-transparent mb-0\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"block-header bg-primary-dark\",children:[/*#__PURE__*/_jsx(\"h3\",{class:\"block-title\",children:\"Detalle del cambio en la entidad del investigado\"}),/*#__PURE__*/_jsx(\"div\",{class:\"block-options\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn-block-option\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-fw fa-times\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"block-content\",style:{'height':'300px','overflow':'scroll','display':'block'},children:[\"Observaciones: \",getEntidadSeleccionado?getEntidadSeleccionado.attributes.observaciones:\"\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),getListaDetalleCambios.data.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsx(\"spam\",{class:\"block-title\",children:\"Historial de cambios en la entidad del investigado\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"block-content\",style:{'height':'300px','overflow':'scroll','display':'block'},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-striped table-vcenter js-dataTable-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Usuario Registra\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dependencia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:listaDetalleCambios()})]})})]}):null,/*#__PURE__*/_jsx(\"div\",{class:\"block-content block-content-full text-right bg-light\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-sm btn-primary\",\"data-dismiss\":\"modal\",children:\"Cerrar\"})})]})})})})]}):null})]});}}];var _useState19=useState({id_etapa:1,id_fase:global.Constants.FASES.ENTIDAD_INVESTIGADO,crear_registro:\"/EntidadInvestigadoForm\",consultar_registros:\"/EntidadInvestigadoLista\",adjuntar_documento:\"/SoporteRadicadoForm\",repositorio_documentos:\"/SoporteRadicadoLista\",modulo:\"CR_EntidadInvestigado\",funcionalidad_crear:\"Crear\",funcionalidad_consultar:\"Consultar\",muestra_atras:true}),_useState20=_slicedToArray(_useState19,2),getRoutes=_useState20[0],setRoutes=_useState20[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var dataCierreEtapa;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.showSpinner(true);setEstadoLista(\"Activos\");cargarDatosInvestigado(1,paganationPerPages,global.Constants.ESTADOS.ACTIVO);// VALIDA CIERRE DE ETAPA EVALUACION\ndataCierreEtapa={\"data\":{\"type\":\"cerrar_etapa\",\"attributes\":{\"id_proceso_disciplinario\":procesoDisciplinarioId,\"id_etapa\":global.Constants.ETAPAS.CAPTURA_REPARTO,\"id_delegada\":\"id_delegada\",\"id_funcionario\":\"id_funcionario\"}}};CierreEtapaApi.getCierreEtapaByIdProcesoDisciplinario(dataCierreEtapa).then(function(datos){if(!datos.error){if(datos[\"data\"].length>0){setEstadoEtapaCapturaReparto(true);}}else{setErrorApi(datos.error.toString());window.showModal(1);}});case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var listaDetalleCambios=function listaDetalleCambios(){if(getListaDetalleCambios.data!=null&&typeof getListaDetalleCambios.data!='undefined'){return getListaDetalleCambios.data.map(function(cambio,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:cambio.attributes.funcionario_registra?cambio.attributes.funcionario_registra.nombre+' '+cambio.attributes.funcionario_registra.apellido:\"\"}),/*#__PURE__*/_jsx(\"td\",{children:cambio.attributes.dependencia_origen?cambio.attributes.dependencia_origen.nombre:\"\"}),/*#__PURE__*/_jsx(\"td\",{title:cambio.attributes.descripcion,children:cambio.attributes.descripcion}),/*#__PURE__*/_jsx(\"td\",{children:cambio.attributes.created_at})]},cambio.id);});}};var cargarDetalleCambiosEstado=function cargarDetalleCambiosEstado(entidad){setEntidadSeleccionado(entidad);GenericApi.getByIdGeneric('log-proceso-disciplinario/get-log-proceso',entidad.id).then(function(datos){return!datos.error?setListaDetalleCambios(datos):window.showModal(1);});};var cargarDatosInvestigado=function cargarDatosInvestigado(page,perPage,estado){var data={\"data\":{\"type\":\"entidad_investigado\",\"attributes\":{\"id_proceso_disciplinario\":procesoDisciplinarioId,\"id_etapa\":\"1\",\"requiere_registro\":true,\"estado\":estado,'per_page':perPage,'current_page':page}}};if(hasAccess('CR_EntidadInvestigado','Consultar')){EntidadInvestigadoApi.getAllEntidadInvestigadoByIdProDisciplinario(data,procesoDisciplinarioId).then(function(datos){if(!datos.error){setEntidadInvestigadoLista(datos);window.showSpinner(false);}else{setErrorApi(datos.error.toString());window.showModal();window.showSpinner(false);}});}else{window.showSpinner(false);}};var handlePageChange=function handlePageChange(page){//window.showSpinner(true);\nsetPageActual(page);//cargarDatosInvestigado(page, perPage, (getEstadoLista == \"Inactivos\" ? '0' : \"1\"));\n};var handlePerRowsChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newPerPage,page){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://window.showSpinner(true);\nsetPerPage(newPerPage);setPageActual(page);//cargarDatosInvestigado(page, newPerPage, (getEstadoLista == \"Inactivos\" ? '0' : \"1\"));\ncase 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePerRowsChange(_x,_x2){return _ref.apply(this,arguments);};}();var handleCallback=function handleCallback(childData){try{window.showSpinner(true);setEstadoLista(childData==global.Constants.ESTADOS.INACTIVO?\"Inactivos\":\"Activos\");cargarDatosInvestigado(1,paganationPerPages,childData);}catch(error){}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(Formik,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"block block-rounded block-bordered\",children:/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb breadcrumb-alt push\",children:[/*#__PURE__*/_jsxs(\"li\",{class:\"breadcrumb-item\",children:[\" \",/*#__PURE__*/_jsx(Link,{underline:\"hover\",className:\"text-dark\",to:\"/MisPendientes\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Mis Pendientes\"})})]}),/*#__PURE__*/_jsxs(\"li\",{class:\"breadcrumb-item\",children:[\" \",/*#__PURE__*/_jsx(Link,{underline:\"hover\",className:\"text-dark\",to:\"/RamasProceso/\",state:{from:from},children:/*#__PURE__*/_jsx(\"small\",{children:\"Ramas del proceso\"})})]}),/*#__PURE__*/_jsxs(\"li\",{class:\"breadcrumb-item\",children:[\" \",/*#__PURE__*/_jsx(\"small\",{children:\"Entidad del investigado Lista\"})]})]})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"block block-themed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"block-header\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"block-title\",children:[\"SINPROC No \",radicado,\" :: \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"Consultar lista de Entidad del Investigado \",getEstadoLista]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group \",children:/*#__PURE__*/_jsx(Field,{type:\"text\",id:\"search\",name:\"search\",onChange:function onChange(e){return setSeach(e.target.value);},onKeyPress:function onKeyPress(e){e.key==='Enter'&&e.preventDefault();},className:\"form-control border border-success\",placeholder:\"Buscar\"})})}),/*#__PURE__*/_jsx(ListaBotones,{getRoutes:getRoutes,from:from,parentCallback:handleCallback,id:\"botonesNavegacion\",name:\"botonesNavegacion\"})]}),hasAccess('CR_EntidadInvestigado','Consultar')?/*#__PURE__*/_jsx(DataTable,{className:\"table table-bordered table-striped table-vcenter js-dataTable-full\",columns:columns,data:entidadInvestigadoLista.data.filter(function(suggestion){if(getSeach===\"\"){return suggestion;}else if((suggestion.attributes.created_at+(suggestion.attributes.nombre_investigado?suggestion.attributes.nombre_investigado:\"NO_APLICA\")+(suggestion.attributes.cargo?suggestion.attributes.cargo:\"NO_APLICA\")+suggestion.attributes.observaciones+(suggestion.attributes.nombre_entidad?suggestion.attributes.nombre_entidad:\"NO_APLICA\")).toLowerCase().includes(getSeach.toLowerCase())){return suggestion;}}),perPage:perPage,page:pageActual,pagination:true,noDataComponent:global.Constants.DATA_TABLE.SIN_DATOS_TABLE,paginationTotalRows:entidadInvestigadoLista.data.length,onChangePage:handlePageChange,onChangeRowsPerPage:handlePerRowsChange,defaultSortFieldId:\"Nombre\",striped:true,paginationComponentOptions:{rowsPerPageText:global.Constants.DATA_TABLE.FILTRO_POR_PAGINA},defaultSortAsc:false}):null]})})]})]})})]});}export default EntidadInvestigadoLista;","map":{"version":3,"sources":["C:/w2d/personeria/personeria-ui/src/components/RamasProceso/EntidadInvestigado/EntidadInvestigadoLista.js"],"names":["ErrorMessage","Field","Form","Formik","React","useEffect","useState","Link","EntidadInvestigadoApi","Navigate","CierreEtapaApi","useLocation","Spinner","hasAccess","ListaBotones","GenericApi","DataTable","EntidadInvestigadoLista","errorApi","setErrorApi","estadoEtapaCapturaReparto","setEstadoEtapaCapturaReparto","getEstadoLista","setEstadoLista","data","links","meta","getListaDetalleCambios","setListaDetalleCambios","paganationPerPages","global","Constants","DATA_TABLE","PAGINATION_PER_PAGE","perPage","setPerPage","pageActual","setPageActual","getSeach","setSeach","entidadInvestigadoLista","setEntidadInvestigadoLista","getEntidadSeleccionado","setEntidadSeleccionado","location","from","state","radicado","procesoDisciplinarioId","columns","name","selector","entidad","attributes","nombre_entidad","sortable","width","created_at","cell","nombre_investigado","cargo","observaciones","length","TEXT_AREA","CANTIDAD_MINIMA_DESCRIPCION","substring","nombre_completo","estado","observaciones_estado","cargarDetalleCambiosEstado","ESTADOS","INACTIVO","id","ACTIVO","listaDetalleCambios","id_etapa","id_fase","FASES","ENTIDAD_INVESTIGADO","crear_registro","consultar_registros","adjuntar_documento","repositorio_documentos","modulo","funcionalidad_crear","funcionalidad_consultar","muestra_atras","getRoutes","setRoutes","fetchData","window","showSpinner","cargarDatosInvestigado","dataCierreEtapa","ETAPAS","CAPTURA_REPARTO","getCierreEtapaByIdProcesoDisciplinario","then","datos","error","toString","showModal","map","cambio","i","funcionario_registra","nombre","apellido","dependencia_origen","descripcion","getByIdGeneric","page","getAllEntidadInvestigadoByIdProDisciplinario","handlePageChange","handlePerRowsChange","newPerPage","handleCallback","childData","e","target","value","key","preventDefault","filter","suggestion","toLowerCase","includes","SIN_DATOS_TABLE","rowsPerPageText","FILTRO_POR_PAGINA"],"mappings":"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","sourcesContent":["import { ErrorMessage, Field, Form, Formik } from 'formik';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport EntidadInvestigadoApi from \"../../Api/Services/EntidadInvestigadoApi\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport CierreEtapaApi from '../../Api/Services/CierreEtapaApi';\r\nimport { useLocation } from 'react-router-dom';\r\nimport Spinner from '../../Utils/Spinner';\r\nimport { hasAccess } from '../../../components/Utils/Common';\r\nimport ListaBotones from '../../Utils/ListaBotones';\r\nimport GenericApi from './../../Api/Services/GenericApi';\r\nimport DataTable from 'react-data-table-component';\r\nimport '../../Utils/Constants';\r\n\r\nfunction EntidadInvestigadoLista() {\r\n\r\n    const [errorApi, setErrorApi] = useState('');\r\n    const [estadoEtapaCapturaReparto, setEstadoEtapaCapturaReparto] = useState(false);\r\n    const [getEstadoLista, setEstadoLista] = useState('');\r\n    const [getListaDetalleCambios, setListaDetalleCambios] = useState({ data: [], links: [], meta: [] });\r\n    const paganationPerPages = global.Constants.DATA_TABLE.PAGINATION_PER_PAGE;\r\n    const [perPage, setPerPage] = useState(global.Constants.DATA_TABLE.PAGINATION_PER_PAGE);\r\n    const [pageActual, setPageActual] = useState(1);\r\n    const [getSeach, setSeach] = useState('');\r\n    const [entidadInvestigadoLista, setEntidadInvestigadoLista] = useState({ data: [], links: [], meta: [] });\r\n    const [getEntidadSeleccionado, setEntidadSeleccionado] = useState('');\r\n\r\n    const location = useLocation()\r\n    const { from } = location.state\r\n    let radicado = from.radicado;\r\n    let procesoDisciplinarioId = from.procesoDisciplinarioId;\r\n\r\n    const columns = [\r\n        {\r\n            name: 'Entidad',\r\n            selector: entidad => entidad.attributes.nombre_entidad?entidad.attributes.nombre_entidad:\"NO_APLICA\",\r\n            sortable: true,\r\n            width: \"30%\"\r\n        },\r\n        {\r\n            name: 'Detalle',\r\n            selector: entidad => entidad.attributes.created_at,\r\n            cell: entidad => <div><small><strong>Fecha de registro:</strong> {entidad.attributes.created_at}<br /></small>\r\n                <small><strong>Sector:</strong> Pendiente<br /></small>\r\n                <small><strong>Nombre investigado:</strong> {entidad.attributes.nombre_investigado?entidad.attributes.nombre_investigado:\"NO_APLICA\"}<br /></small>\r\n                <small><strong>Cargo investigado:</strong> {entidad.attributes.cargo?entidad.attributes.cargo:\"NO_APLICA\"}<br /></small>\r\n                <small title={(entidad.attributes.observaciones)?entidad.attributes.observaciones:\"\"}><strong>Observaciones:</strong> {(entidad.attributes.observaciones)?(entidad.attributes.observaciones.length>global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION?entidad.attributes.observaciones.substring(0, global.Constants.TEXT_AREA.CANTIDAD_MINIMA_DESCRIPCION)+\"...\":(entidad.attributes.observaciones)):\"\"}<br /></small>\r\n                <small><strong>Registrado por:</strong> {entidad.attributes.nombre_completo?entidad.attributes.nombre_completo:\"NO_APLICA\"}<br /></small>\r\n                <small><strong>Registrado en:</strong> {entidad.attributes.nombre_entidad?entidad.attributes.nombre_entidad:\"NO_APLICA\"}<br /></small>\r\n                <small><strong>Estado:</strong> {entidad.attributes.estado == '1' ? 'Activo' : 'Inactivo'}<br /></small>\r\n                {\r\n                    (entidad.attributes.observaciones_estado) ? (\r\n                        <small><strong>Justificación cambio de estado:</strong> {entidad.attributes.observaciones_estado}<br /></small>\r\n                    ) : null\r\n                }</div>,\r\n            sortable: true,\r\n            width: \"30%\"\r\n        },\r\n        {\r\n            name: 'Acciones',\r\n\r\n\r\n            cell: entidad =>\r\n                <div className='row'>\r\n                    <div className='col-4'>\r\n                        <button type='button' title='Ver detalle Entidad del Investigado' className='btn btn-sm btn-primary' data-toggle=\"modal\" onClick={() => cargarDetalleCambiosEstado(entidad)} data-target={'#modal-consultar-detalle'}><i class=\"fas fa-search\"></i></button>\r\n                    </div>\r\n                    <div className='col'>\r\n\r\n                        {\r\n                            (hasAccess('CR_EntidadInvestigado', 'Inactivar')) ? (\r\n                                <div>\r\n                                    {\r\n                                        (entidad.attributes.estado == global.Constants.ESTADOS.INACTIVO) ? (\r\n                                            <Link to={`/EntidadInvestigadoCambiarEstadoForm/${entidad.id}`} state={{ from: from }}>\r\n                                                <button type='button' title='Activar Entidad' className='btn btn-sm btn-success' data-toggle=\"modal\" data-target={'#modal-cambiar-estado'}><i className=\"fas fa-plus-circle\"></i></button>\r\n                                            </Link>\r\n                                        ) : null\r\n                                    }\r\n\r\n                                    {\r\n                                        (entidad.attributes.estado == global.Constants.ESTADOS.ACTIVO && (entidadInvestigadoLista.data.length > 1 || pageActual > 1)) ? (\r\n                                            <Link to={`/EntidadInvestigadoCambiarEstadoForm/${entidad.id}`} state={{ from: from }}>\r\n                                                <button type='button' title='Inactivar Entidad' className='btn btn-sm btn-danger'><i className=\"fas fa-minus-circle\"></i></button>\r\n                                            </Link>\r\n                                        ) : null\r\n                                    }\r\n\r\n                                    <div className=\"modal fade\" id={'modal-consultar-detalle'} tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modal-block-normal\" aria-hidden=\"true\">\r\n                                        <div className=\"modal-dialog modal-lg\" role=\"document\" >\r\n                                            <div class=\"modal-content\">\r\n                                                <div class=\"block block-themed block-transparent mb-0\">\r\n                                                    <div class=\"block-header bg-primary-dark\">\r\n                                                        <h3 class=\"block-title\">Detalle del cambio en la entidad del investigado</h3>\r\n                                                        <div class=\"block-options\">\r\n                                                            <button type=\"button\" class=\"btn-block-option\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                                                <i class=\"fa fa-fw fa-times\"></i>\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class=\"block-content\" style={{ 'height': '300px', 'overflow': 'scroll', 'display': 'block' }}>\r\n                                                        Observaciones: {getEntidadSeleccionado?getEntidadSeleccionado.attributes.observaciones:\"\"}<br /><br />\r\n                                                    </div>\r\n                                                    {\r\n                                                        (getListaDetalleCambios.data.length > 0) ? (\r\n                                                            <div>\r\n                                                                <div className=\"block-content\">\r\n                                                                    <spam class=\"block-title\">Historial de cambios en la entidad del investigado</spam>\r\n                                                                </div>\r\n\r\n                                                                <div class=\"block-content\" style={{ 'height': '300px', 'overflow': 'scroll', 'display': 'block' }}>\r\n                                                                    <table className=\"table table-bordered table-striped table-vcenter js-dataTable-full\">\r\n                                                                        <thead>\r\n                                                                            <tr>\r\n                                                                                <th>Usuario Registra</th>\r\n                                                                                <th>Descripción</th>\r\n                                                                                <th>Dependencia</th>\r\n                                                                                <th>Fecha</th>\r\n                                                                            </tr>\r\n                                                                        </thead>\r\n                                                                        <tbody>\r\n                                                                            {listaDetalleCambios()}\r\n                                                                        </tbody>\r\n                                                                    </table>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        ) : null\r\n                                                    }\r\n\r\n\r\n                                                    <div class=\"block-content block-content-full text-right bg-light\">\r\n                                                        <button type=\"button\" class=\"btn btn-sm btn-primary\" data-dismiss=\"modal\">Cerrar</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n                            ) : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n        }\r\n    ];\r\n\r\n    const [getRoutes, setRoutes] = useState({\r\n        id_etapa: 1,\r\n        id_fase: global.Constants.FASES.ENTIDAD_INVESTIGADO,\r\n        crear_registro: \"/EntidadInvestigadoForm\",\r\n        consultar_registros: \"/EntidadInvestigadoLista\",\r\n        adjuntar_documento: \"/SoporteRadicadoForm\",\r\n        repositorio_documentos: \"/SoporteRadicadoLista\",\r\n        modulo: \"CR_EntidadInvestigado\",\r\n        funcionalidad_crear: \"Crear\",\r\n        funcionalidad_consultar: \"Consultar\",\r\n        muestra_atras: true\r\n    });\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            window.showSpinner(true);\r\n            setEstadoLista(\"Activos\")\r\n\r\n\r\n            cargarDatosInvestigado(1, paganationPerPages, global.Constants.ESTADOS.ACTIVO);\r\n\r\n            // VALIDA CIERRE DE ETAPA EVALUACION\r\n            const dataCierreEtapa = {\r\n\r\n                \"data\": {\r\n                    \"type\": \"cerrar_etapa\",\r\n                    \"attributes\": {\r\n                        \"id_proceso_disciplinario\": procesoDisciplinarioId,\r\n                        \"id_etapa\": global.Constants.ETAPAS.CAPTURA_REPARTO,\r\n                        \"id_delegada\": \"id_delegada\",\r\n                        \"id_funcionario\": \"id_funcionario\"\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            CierreEtapaApi.getCierreEtapaByIdProcesoDisciplinario(dataCierreEtapa).then(\r\n                datos => {\r\n                    if (!datos.error) {\r\n                        if (datos[\"data\"].length > 0) {\r\n                            setEstadoEtapaCapturaReparto(true);\r\n                        }\r\n                    }\r\n                    else {\r\n                        setErrorApi(datos.error.toString())\r\n                        window.showModal(1)\r\n                    }\r\n                }\r\n            )\r\n        }\r\n        fetchData();\r\n    }, []);\r\n\r\n    \r\n\r\n    const listaDetalleCambios = () => {\r\n        if (getListaDetalleCambios.data != null && typeof (getListaDetalleCambios.data) != 'undefined') {\r\n            return (\r\n\r\n\r\n\r\n                getListaDetalleCambios.data.map((cambio, i) => {\r\n                    return (\r\n                        <tr key={cambio.id}>\r\n                            <td>\r\n                                {cambio.attributes.funcionario_registra ? cambio.attributes.funcionario_registra.nombre + ' ' + cambio.attributes.funcionario_registra.apellido : \"\"}\r\n                            </td>\r\n                            <td>\r\n                                {cambio.attributes.dependencia_origen ? cambio.attributes.dependencia_origen.nombre : \"\"}\r\n                            </td>\r\n                                <td title={cambio.attributes.descripcion}>\r\n                                    {cambio.attributes.descripcion}\r\n                                </td>\r\n                            <td>\r\n                                {cambio.attributes.created_at}\r\n                            </td>\r\n                        </tr>\r\n                    )\r\n                })\r\n            )\r\n        }\r\n    }\r\n\r\n    const cargarDetalleCambiosEstado = (entidad) => {\r\n        setEntidadSeleccionado(entidad)\r\n        GenericApi.getByIdGeneric('log-proceso-disciplinario/get-log-proceso', entidad.id).then(\r\n            datos => !datos.error ? (setListaDetalleCambios(datos)) : (window.showModal(1)));\r\n    }\r\n\r\n\r\n\r\n    const cargarDatosInvestigado = (page, perPage, estado) => {\r\n\r\n        const data = {\r\n            \"data\": {\r\n                \"type\": \"entidad_investigado\",\r\n                \"attributes\": {\r\n                    \"id_proceso_disciplinario\": procesoDisciplinarioId,\r\n                    \"id_etapa\": \"1\",\r\n                    \"requiere_registro\": true,\r\n                    \"estado\": estado,\r\n                    'per_page': perPage,\r\n                    'current_page': page\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hasAccess('CR_EntidadInvestigado', 'Consultar')) {\r\n            EntidadInvestigadoApi.getAllEntidadInvestigadoByIdProDisciplinario(data, procesoDisciplinarioId).then(\r\n                datos => {\r\n                    if (!datos.error) {\r\n                        setEntidadInvestigadoLista(datos)\r\n                        window.showSpinner(false);\r\n                    }\r\n                    else {\r\n                        setErrorApi(datos.error.toString())\r\n                        window.showModal();\r\n                        window.showSpinner(false);\r\n                    }\r\n\r\n                }\r\n            )\r\n        }\r\n        else {\r\n            window.showSpinner(false)\r\n        }\r\n    }\r\n\r\n    const handlePageChange = page => {\r\n        //window.showSpinner(true);\r\n        setPageActual(page);\r\n        //cargarDatosInvestigado(page, perPage, (getEstadoLista == \"Inactivos\" ? '0' : \"1\"));\r\n    }\r\n\r\n    const handlePerRowsChange = async (newPerPage, page) => {\r\n        //window.showSpinner(true);\r\n        setPerPage(newPerPage);\r\n        setPageActual(page);\r\n        //cargarDatosInvestigado(page, newPerPage, (getEstadoLista == \"Inactivos\" ? '0' : \"1\"));\r\n\r\n    }\r\n\r\n\r\n\r\n    const handleCallback = (childData) => {\r\n        try {\r\n            window.showSpinner(true)\r\n            setEstadoLista(childData == global.Constants.ESTADOS.INACTIVO ? \"Inactivos\" : \"Activos\")\r\n            cargarDatosInvestigado(1, paganationPerPages, childData);\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n\r\n            {<Spinner />}\r\n            <Formik>\r\n                <Form>\r\n                    <div className=\"col-md-12\">\r\n                        <div className=\"block block-rounded block-bordered\">\r\n                            <div className=\"block-content\">\r\n                                <nav aria-label=\"breadcrumb\">\r\n                                    <ol className=\"breadcrumb breadcrumb-alt push\">\r\n\r\n                                        <li class=\"breadcrumb-item\"> <Link underline=\"hover\" className=\"text-dark\" to={`/MisPendientes`}><small>Mis Pendientes</small></Link></li>\r\n                                        <li class=\"breadcrumb-item\"> <Link underline=\"hover\" className=\"text-dark\" to={`/RamasProceso/`} state={{ from: from }}><small>Ramas del proceso</small></Link></li>\r\n                                        <li class=\"breadcrumb-item\"> <small>Entidad del investigado Lista</small></li>\r\n\r\n                                    </ol>\r\n                                </nav>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"block block-themed\">\r\n                        <div className=\"block-header\">\r\n                            <h3 className=\"block-title\">SINPROC No {radicado} :: <strong>Consultar lista de Entidad del Investigado {getEstadoLista}</strong></h3>\r\n                        </div>\r\n\r\n                        <div className=\"block-content\">\r\n                            <>\r\n\r\n                                <div className='row'>\r\n\r\n                                    <div className='col-md-3'>\r\n                                        <div className=\"form-group \">\r\n                                            <Field type=\"text\" id=\"search\" name=\"search\" onChange={e => setSeach(e.target.value)} onKeyPress={(e) => { e.key === 'Enter' && e.preventDefault(); }} className=\"form-control border border-success\" placeholder=\"Buscar\" />\r\n\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/*ListaBotones(getRoutes)*/}\r\n                                    <ListaBotones getRoutes={getRoutes} from={from} parentCallback={handleCallback} id=\"botonesNavegacion\" name=\"botonesNavegacion\" />\r\n                                </div>\r\n\r\n\r\n                                {\r\n                                    (hasAccess('CR_EntidadInvestigado', 'Consultar')) ? (\r\n                                        <DataTable className=\"table table-bordered table-striped table-vcenter js-dataTable-full\"\r\n                                            columns={columns}\r\n                                            data={entidadInvestigadoLista.data.filter((suggestion) => {\r\n                                                if (getSeach === \"\") {\r\n                                                    return suggestion;\r\n                                                } else if (\r\n\r\n                                                    ((suggestion.attributes.created_at\r\n                                                        + (suggestion.attributes.nombre_investigado?suggestion.attributes.nombre_investigado:\"NO_APLICA\")\r\n                                                        + (suggestion.attributes.cargo?suggestion.attributes.cargo:\"NO_APLICA\") +\r\n                                                        suggestion.attributes.observaciones + (suggestion.attributes.nombre_entidad?suggestion.attributes.nombre_entidad:\"NO_APLICA\")).toLowerCase().includes(getSeach.toLowerCase()))\r\n\r\n                                                ) {\r\n                                                    return suggestion;\r\n                                                }\r\n                                            })}\r\n                                            perPage={perPage}\r\n                                            page={pageActual}\r\n                                            pagination\r\n                                            noDataComponent={global.Constants.DATA_TABLE.SIN_DATOS_TABLE}\r\n                                            paginationTotalRows={entidadInvestigadoLista.data.length}\r\n                                            onChangePage={handlePageChange}\r\n                                            onChangeRowsPerPage={handlePerRowsChange}\r\n                                            defaultSortFieldId=\"Nombre\"\r\n                                            striped\r\n                                            paginationComponentOptions={{ rowsPerPageText: global.Constants.DATA_TABLE.FILTRO_POR_PAGINA }}\r\n                                            defaultSortAsc={false}\r\n                                        />\r\n                                    ) : null\r\n                                }\r\n                            </>\r\n\r\n                        </div>\r\n                    </div>\r\n                </Form>\r\n            </Formik>\r\n        </>\r\n    );\r\n\r\n\r\n}\r\nexport default EntidadInvestigadoLista;\r\n"]},"metadata":{},"sourceType":"module"}