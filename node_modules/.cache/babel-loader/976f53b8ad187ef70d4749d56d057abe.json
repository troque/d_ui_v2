{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validationRules = validationRules;\nexports.registerValidation = registerValidation;\nexports.renderInput = renderInput;\nexports.renderInputs = renderInputs;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"../utils\");\n\nvar _translate = require(\"../translate\");\n\nvar _translation_utils = require(\"../translation_utils\");\n\nvar _FieldPropsOverride = require(\"./components/FieldPropsOverride\");\n\nvar _AutofieldContainer = require(\"./AutofieldContainer\");\n\nvar _excluded = [\"field\", \"fieldSchema\", \"fieldSchema\", \"initialValue\", \"parent\", \"children\", \"propOverrides\", \"schemaTypeName\", \"config\", \"index\", \"skin\", \"styles\"],\n    _excluded2 = [\"schema\", \"config\", \"children\", \"propOverrides\", \"initialValues\", \"styles\"];\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar validations = {\n  required: function required(_ref3) {\n    var value = _ref3.value,\n        message = _ref3.message;\n    return message;\n  },\n  maxLength: 'maxLength',\n  minLength: 'minLength',\n  max: 'max',\n  min: 'min',\n  pattern: 'pattern',\n  validate: 'validate'\n};\n/**\n * Creates validation rules after schema\n *\n * @param {object} fieldSchema\n */\n\nfunction validationRules(fieldSchema) {\n  var validationKeys = Object.keys(validations);\n  return validationKeys.reduce(function (result, key) {\n    if (key in fieldSchema) {\n      var validation = fieldSchema[key];\n      var data;\n\n      if (typeof validation == 'object') {\n        if (validation.message && typeof validation.message == 'function') validation.message = validation.message(fieldSchema);\n        data = validation;\n      } else {\n        data = {\n          value: fieldSchema[key],\n          message: (0, _translation_utils.trError)(key, fieldSchema)\n        };\n      }\n\n      result[key] = typeof validations[key] == 'function' ? validations[key](data) : data;\n    }\n\n    return result;\n  }, {});\n}\n/**\n * Passes the validation parameters to react-hook-form\n *\n * @param {string} name Field name\n * @param {object} fieldSchema Schema for the field\n * @param {function} register react-hook-form register\n */\n\n\nfunction registerValidation(name, fieldSchema, register) {\n  var rules = validationRules(fieldSchema);\n  return register(name, rules);\n}\n/**\n * Searches in children to find overrides.\n */\n\n\nfunction searchForOverrides(parent, name) {\n  var children = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  var childrenArr = _react.Children.map(children, function (child) {\n    return child;\n  });\n\n  return childrenArr.reduce(function (override, child) {\n    var childName = child.props.name;\n    var dottedChild = childName && childName.replace(/(\\[|\\]\\.)/g, '.');\n    var isOverride = child.type == _FieldPropsOverride.FieldPropsOverride;\n\n    if (isOverride && dottedChild == name) {\n      var cloned = Object.assign({}, child.props);\n      delete cloned.name;\n      return cloned;\n    } else {\n      return override;\n    }\n  }, {});\n}\n/**\n * Renders a single field.\n *\n * @param {object} params\n * @param {string} params.field Name of the field\n * @param {object} params.fieldSchema Schema specification\n *    for the field\n * @param {string} params.parent Prefix of the field name\n * @param {string} params.schemaTypeName Name of the schema\n *    (first argument while instantiating a schema)\n * @param {object} params.config Form configuration\n * @param {...object} params.rest props passed to the component\n */\n\n\nfunction renderInput(_ref) {\n  var field = _ref.field,\n      fieldSchema = _ref.fieldSchema,\n      _ref$fieldSchema = _ref.fieldSchema,\n      type = _ref$fieldSchema.type,\n      required = _ref$fieldSchema.required,\n      defaultValue = _ref$fieldSchema.defaultValue,\n      initialValue = _ref.initialValue,\n      parent = _ref.parent,\n      children = _ref.children,\n      propOverrides = _ref.propOverrides,\n      schemaTypeName = _ref.schemaTypeName,\n      _ref$config = _ref.config,\n      config = _ref$config === void 0 ? {} : _ref$config,\n      index = _ref.index,\n      skin = _ref.skin,\n      styles = _ref.styles,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var strType = (0, _utils.schemaTypeEx)(type);\n\n  function describePlace() {\n    return \"Schema \\\"\".concat(schemaTypeName, \"\\\" has field \\\"\").concat(field, \"\\\"\");\n  }\n\n  if (!strType) {\n    throw \"\".concat(describePlace(), \" that lacks type description.\");\n  }\n\n  var skinElement = skin[strType];\n\n  if (!skinElement) {\n    throw \"\".concat(describePlace(), \" with type \\\"\").concat(strType, \"\\\" \") + 'that doesn\\'t exist in skin.';\n  }\n\n  var rules = validationRules(fieldSchema);\n  var fullField = (0, _utils.inputName)({\n    parent: parent,\n    index: index,\n    field: field\n  });\n  var id = \"\".concat(schemaTypeName, \"-\").concat(fullField);\n  var overrides = searchForOverrides(parent, fullField, propOverrides);\n  defaultValue = typeof initialValue == 'undefined' ? defaultValue : initialValue;\n  return /*#__PURE__*/(0, _react.createElement)(_AutofieldContainer.AutofieldContainer, _objectSpread(_objectSpread({}, rest), {}, {\n    id: id,\n    key: fullField,\n    name: fullField,\n    field: field,\n    fieldSchema: fieldSchema,\n    schemaTypeName: schemaTypeName,\n    config: config,\n    parent: parent,\n    propOverrides: propOverrides,\n    rules: rules,\n    styles: styles,\n    skin: skin,\n    skinElement: skinElement,\n    defaultValue: defaultValue,\n    overrides: overrides\n  }));\n}\n/**\n * Renders the inputs to make the schema work.\n *\n * @param {object} params\n * @param {Schema} params.schema Schema instance\n * @param {object} params.config Rendering configuration\n * @param {string} params.config.arrayMode 'panels' or 'table'\n * @param {...object} params.rest Props passed to every input\n *\n * @returns {array} React elements with the form and inputs.\n */\n\n\nfunction renderInputs(_ref2) {\n  var schema = _ref2.schema,\n      _ref2$config = _ref2.config,\n      config = _ref2$config === void 0 ? {} : _ref2$config,\n      children = _ref2.children,\n      propOverrides = _ref2.propOverrides,\n      _ref2$initialValues = _ref2.initialValues,\n      initialValues = _ref2$initialValues === void 0 ? {} : _ref2$initialValues,\n      _ref2$styles = _ref2.styles,\n      styles = _ref2$styles === void 0 ? {} : _ref2$styles,\n      rest = _objectWithoutProperties(_ref2, _excluded2);\n\n  var schemaDef = schema.getSchema();\n  var schemaKeys = Object.keys(schemaDef);\n  return schemaKeys.map(function (field) {\n    return renderInput(_objectSpread(_objectSpread({}, rest), {}, {\n      field: field,\n      config: config,\n      propOverrides: propOverrides || children,\n      fieldSchema: schemaDef[field],\n      schemaTypeName: schema.getType(),\n      initialValue: initialValues[field],\n      styles: styles\n    }));\n  });\n}","map":{"version":3,"sources":["C:/w2d/personeria/personeria-ui/node_modules/react-hook-form-auto/lib/ui/componentRender.js"],"names":["Object","defineProperty","exports","value","validationRules","registerValidation","renderInput","renderInputs","_react","_interopRequireWildcard","require","_utils","_translate","_translation_utils","_FieldPropsOverride","_AutofieldContainer","_excluded","_excluded2","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","validations","required","message","maxLength","minLength","max","min","pattern","validate","fieldSchema","validationKeys","reduce","result","validation","data","trError","name","register","rules","searchForOverrides","parent","children","childrenArr","Children","map","child","override","childName","props","dottedChild","replace","isOverride","type","FieldPropsOverride","cloned","assign","_ref","field","defaultValue","initialValue","propOverrides","schemaTypeName","config","index","skin","styles","rest","strType","schemaTypeEx","describePlace","skinElement","fullField","inputName","id","overrides","createElement","AutofieldContainer","_ref2","schema","initialValues","schemaDef","getSchema","schemaKeys","getType"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validationRules = validationRules;\nexports.registerValidation = registerValidation;\nexports.renderInput = renderInput;\nexports.renderInputs = renderInputs;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"../utils\");\n\nvar _translate = require(\"../translate\");\n\nvar _translation_utils = require(\"../translation_utils\");\n\nvar _FieldPropsOverride = require(\"./components/FieldPropsOverride\");\n\nvar _AutofieldContainer = require(\"./AutofieldContainer\");\n\nconst _excluded = [\"field\", \"fieldSchema\", \"fieldSchema\", \"initialValue\", \"parent\", \"children\", \"propOverrides\", \"schemaTypeName\", \"config\", \"index\", \"skin\", \"styles\"],\n      _excluded2 = [\"schema\", \"config\", \"children\", \"propOverrides\", \"initialValues\", \"styles\"];\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst validations = {\n  required: ({\n    value,\n    message\n  }) => message,\n  maxLength: 'maxLength',\n  minLength: 'minLength',\n  max: 'max',\n  min: 'min',\n  pattern: 'pattern',\n  validate: 'validate'\n};\n/**\n * Creates validation rules after schema\n *\n * @param {object} fieldSchema\n */\n\nfunction validationRules(fieldSchema) {\n  const validationKeys = Object.keys(validations);\n  return validationKeys.reduce((result, key) => {\n    if (key in fieldSchema) {\n      const validation = fieldSchema[key];\n      let data;\n\n      if (typeof validation == 'object') {\n        if (validation.message && typeof validation.message == 'function') validation.message = validation.message(fieldSchema);\n        data = validation;\n      } else {\n        data = {\n          value: fieldSchema[key],\n          message: (0, _translation_utils.trError)(key, fieldSchema)\n        };\n      }\n\n      result[key] = typeof validations[key] == 'function' ? validations[key](data) : data;\n    }\n\n    return result;\n  }, {});\n}\n/**\n * Passes the validation parameters to react-hook-form\n *\n * @param {string} name Field name\n * @param {object} fieldSchema Schema for the field\n * @param {function} register react-hook-form register\n */\n\n\nfunction registerValidation(name, fieldSchema, register) {\n  const rules = validationRules(fieldSchema);\n  return register(name, rules);\n}\n/**\n * Searches in children to find overrides.\n */\n\n\nfunction searchForOverrides(parent, name, children = []) {\n  const childrenArr = _react.Children.map(children, child => child);\n\n  return childrenArr.reduce((override, child) => {\n    const childName = child.props.name;\n    const dottedChild = childName && childName.replace(/(\\[|\\]\\.)/g, '.');\n    const isOverride = child.type == _FieldPropsOverride.FieldPropsOverride;\n\n    if (isOverride && dottedChild == name) {\n      const cloned = Object.assign({}, child.props);\n      delete cloned.name;\n      return cloned;\n    } else {\n      return override;\n    }\n  }, {});\n}\n/**\n * Renders a single field.\n *\n * @param {object} params\n * @param {string} params.field Name of the field\n * @param {object} params.fieldSchema Schema specification\n *    for the field\n * @param {string} params.parent Prefix of the field name\n * @param {string} params.schemaTypeName Name of the schema\n *    (first argument while instantiating a schema)\n * @param {object} params.config Form configuration\n * @param {...object} params.rest props passed to the component\n */\n\n\nfunction renderInput(_ref) {\n  let {\n    field,\n    fieldSchema,\n    fieldSchema: {\n      type,\n      required,\n      defaultValue\n    },\n    initialValue,\n    parent,\n    children,\n    propOverrides,\n    schemaTypeName,\n    config = {},\n    index,\n    skin,\n    styles\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  const strType = (0, _utils.schemaTypeEx)(type);\n\n  function describePlace() {\n    return `Schema \"${schemaTypeName}\" has field \"${field}\"`;\n  }\n\n  if (!strType) {\n    throw `${describePlace()} that lacks type description.`;\n  }\n\n  const skinElement = skin[strType];\n\n  if (!skinElement) {\n    throw `${describePlace()} with type \"${strType}\" ` + 'that doesn\\'t exist in skin.';\n  }\n\n  const rules = validationRules(fieldSchema);\n  const fullField = (0, _utils.inputName)({\n    parent,\n    index,\n    field\n  });\n  const id = `${schemaTypeName}-${fullField}`;\n  const overrides = searchForOverrides(parent, fullField, propOverrides);\n  defaultValue = typeof initialValue == 'undefined' ? defaultValue : initialValue;\n  return /*#__PURE__*/(0, _react.createElement)(_AutofieldContainer.AutofieldContainer, _objectSpread(_objectSpread({}, rest), {}, {\n    id: id,\n    key: fullField,\n    name: fullField,\n    field: field,\n    fieldSchema: fieldSchema,\n    schemaTypeName: schemaTypeName,\n    config: config,\n    parent: parent,\n    propOverrides: propOverrides,\n    rules: rules,\n    styles: styles,\n    skin: skin,\n    skinElement: skinElement,\n    defaultValue: defaultValue,\n    overrides: overrides\n  }));\n}\n/**\n * Renders the inputs to make the schema work.\n *\n * @param {object} params\n * @param {Schema} params.schema Schema instance\n * @param {object} params.config Rendering configuration\n * @param {string} params.config.arrayMode 'panels' or 'table'\n * @param {...object} params.rest Props passed to every input\n *\n * @returns {array} React elements with the form and inputs.\n */\n\n\nfunction renderInputs(_ref2) {\n  let {\n    schema,\n    config = {},\n    children,\n    propOverrides,\n    initialValues = {},\n    styles = {}\n  } = _ref2,\n      rest = _objectWithoutProperties(_ref2, _excluded2);\n\n  const schemaDef = schema.getSchema();\n  const schemaKeys = Object.keys(schemaDef);\n  return schemaKeys.map(field => renderInput(_objectSpread(_objectSpread({}, rest), {}, {\n    field,\n    config,\n    propOverrides: propOverrides || children,\n    fieldSchema: schemaDef[field],\n    schemaTypeName: schema.getType(),\n    initialValue: initialValues[field],\n    styles\n  })));\n}"]},"metadata":{},"sourceType":"script"}